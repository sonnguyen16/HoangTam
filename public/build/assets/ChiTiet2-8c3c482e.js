import{Q as k,h as j,T as C,z as S,u as a,o as i,c as _,w as u,f as r,a as t,F as b,k as g,l as f,t as c,n as V,e as y,x as B,y as L}from"./app-d39ee91f.js";/* empty css                                                                 */import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const d=h=>(B("data-v-19f78bc3"),h=h(),L(),h),U={class:"d-flex align-items-center"},I=d(()=>t("label",{for:"ngay_bat_dau",class:"font-weight-bold text-secondary mt-2"},"Bắt đầu:",-1)),F=d(()=>t("label",{for:"ngay_ket_thuc",class:"font-weight-bold text-secondary mt-2"},"Kết thúc:",-1)),D=d(()=>t("label",{for:"user",class:"font-weight-bold text-secondary mt-2"},"Tiến độ:",-1)),E={class:"mt-1"},M=d(()=>t("label",{for:"mo_ta",class:"font-weight-bold text-success"},"Mô tả hạng mục:",-1)),N={class:"mt-3"},z={class:"d-flex align-items-center mb-2"},A=d(()=>t("label",{for:"mo_ta",class:"font-weight-bold text-success mt-2"},"Attachments:",-1)),O=d(()=>t("label",{for:"files1",class:"btn btn-dark btn-sm mt-2 ml-3"},"Chọn file",-1)),H=d(()=>t("span",{id:"fileList",class:"d-inline-block ml-3"},null,-1)),K={key:0,class:"row"},Q={class:"col-md-4"},X={class:"card"},q={class:"card-body p-0"},G={class:"table table-striped"},J=d(()=>t("thead",null,[t("tr",null,[t("th",null,"File")])],-1)),P={colspan:"2"},R=["href"],W={key:1},Y=["disabled"],Z=d(()=>t("hr",null,null,-1)),tt={class:"",id:"subtasks"},et=d(()=>t("label",{for:"mo_ta",class:"font-weight-bold text-success"},"Hạng mục con:",-1)),nt=["href"],st=d(()=>t("hr",null,null,-1)),ot={id:"comments",class:""},at={class:"font-weight-bold"},dt={class:"card"},lt={class:"card-body"},it=["src"],_t={key:1,src:"/uploads/avatardefault.png",alt:"avatar",class:"rounded-full w-10 object-cover"},ut=["value"],rt=d(()=>t("input",{id:"comment",class:"form-control border-0 flex-1",placeholder:"Nhập bình luận"},null,-1)),ct=d(()=>t("button",{type:"submit",class:""},[t("i",{class:"fa fa-paper-plane text-lg text-primary"})],-1)),ht={style:{"max-height":"200px",overflow:"auto"}},pt={class:""},mt={class:"d-flex"},bt=["src"],gt={key:1,src:"/uploads/avatardefault.png",alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},ft={class:"flex-1 ml-3"},yt={class:"d-flex justify-content-between"},vt={class:"font-weight-bold"},xt={class:"text-secondary"},wt={class:"text-md"},kt={__name:"ChiTiet2",props:{du_an:Object,users:Object},setup(h){const m=k(),s=h,p=j([]),e=C({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",mo_ta:"",trang_thai:"",parent_id:"",children:[],files:[],binh_luan:[],tien_do:0});S(()=>{e.id=s.du_an.id,e.ten=s.du_an.ten,e.ngay_bat_dau=s.du_an.ngay_bat_dau,e.ngay_ket_thuc=s.du_an.ngay_ket_thuc,e.user_id=s.du_an.user_id,$("#user").val(s.du_an.user_id).trigger("change"),e.mo_ta=s.du_an.mo_ta,e.trang_thai=s.du_an.trang_thai,e.parent_id=s.du_an.parent_id,e.children=s.du_an.children,e.files=s.du_an.files,p.value=s.du_an.files,e.binh_luan=s.du_an.binh_luan,e.tien_do=s.du_an.tien_do});const v=()=>{e.post(route("duan.store"),{onSuccess:()=>{toastr.success("Cập nhật thành công")},onError:l=>{console.log(l),toastr.error("Có lỗi xảy ra, vui lòng thử lại")}})};function x(l){e.files=l.target.files,p.value=[...p.value,...Array.from(l.target.files).map(o=>({ten:o.name}))]}function w(){axios({method:"post",url:route("binhluan.store"),data:{noi_dung:$("#comment").val(),du_an_id:s.du_an.id}}).then(l=>{$("#comment").val(""),s.du_an.binh_luan.push({noi_dung:l.data.noi_dung,nguoi_dung:l.data.nguoi_dung,created_at:l.data.created_at})}).catch(l=>{console.log(l)})}return(l,o)=>a(e).id?(i(),_("form",{key:0,onSubmit:y(v,["prevent"])},[u(t("input",{type:"hidden","onUpdate:modelValue":o[0]||(o[0]=n=>a(e).id=n),id:"id",class:"form-control"},null,512),[[r,a(e).id]]),u(t("input",{readonly:"",type:"text",class:"font-weight-bold border-0 w-100 text-lg pl-0 pb-0","onUpdate:modelValue":o[1]||(o[1]=n=>a(e).ten=n)},null,512),[[r,a(e).ten]]),t("div",U,[I,u(t("input",{readonly:"",type:"date","onUpdate:modelValue":o[2]||(o[2]=n=>a(e).ngay_bat_dau=n),id:"ngay_bat_dau",class:"border-0 mr-3 text-secondary"},null,512),[[r,a(e).ngay_bat_dau]]),F,u(t("input",{readonly:"",type:"date","onUpdate:modelValue":o[3]||(o[3]=n=>a(e).ngay_ket_thuc=n),id:"ngay_ket_thuc",class:"border-0 mr-3 text-secondary"},null,512),[[r,a(e).ngay_ket_thuc]]),D,u(t("input",{"onUpdate:modelValue":o[4]||(o[4]=n=>a(e).tien_do=n),class:"border-0 outline-0 font-bold focus:outline-0",type:"number"},null,512),[[r,a(e).tien_do]])]),t("div",E,[M,u(t("textarea",{readonly:"","onUpdate:modelValue":o[5]||(o[5]=n=>a(e).mo_ta=n),id:"mo_ta",class:"form-control border-0 pl-0",rows:"3"},null,512),[[r,a(e).mo_ta]])]),t("div",N,[t("div",z,[A,O,t("input",{accept:".png, .jpg, .jpeg, .gif, .bmp, .doc, .docx, .xls, .xlsx, .pdf",type:"file",onInput:o[6]||(o[6]=n=>x(n)),id:"files1",class:"d-none",multiple:""},null,32),H]),p.value.length>0?(i(),_("div",K,[t("div",Q,[t("div",X,[t("div",q,[t("table",G,[J,t("tbody",null,[(i(!0),_(b,null,g(p.value,n=>(i(),_("tr",{key:n.id},[t("td",P,[n.id?(i(),_("a",{key:0,href:`/uploads/du_an/${n.ten}`,target:"_blank",class:""},c(n.ten.length>40?n.ten.slice(0,40)+"...":n.ten),9,R)):(i(),_("span",W,c(n.ten),1))])]))),128))])])])])])])):f("",!0),t("button",{type:"submit",disabled:a(e).processing,class:"btn btn-primary right-0 font-weight-bold"},"Lưu",8,Y),Z,t("div",tt,[et,t("a",{class:"btn btn-primary btn-sm ml-3 font-weight-bold",href:l.route("duan.detail",{id:a(e).id})},"Xem chi tiết",8,nt)]),st,t("div",ot,[t("p",at,"Bình luận ("+c(s.du_an.binh_luan.length)+")",1),t("div",dt,[t("div",lt,[t("div",{class:V(["d-flex",{"mb-4":s.du_an.binh_luan.length>0}])},[a(m).props.user.hinh_anh?(i(),_("img",{key:0,src:"/uploads/nhan_vien/"+a(m).props.user.hinh_anh,alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},null,8,it)):(i(),_("img",_t)),t("form",{onSubmit:o[7]||(o[7]=y(n=>w(),["prevent"])),class:"flex-1 d-flex"},[t("input",{type:"hidden",value:s.du_an.id},null,8,ut),rt,ct],32)],2),t("div",ht,[(i(!0),_(b,null,g(s.du_an.binh_luan,n=>(i(),_("div",pt,[t("div",mt,[n.nguoi_dung.hinh_anh?(i(),_("img",{key:0,src:"/uploads/nhan_vien/"+n.nguoi_dung.hinh_anh,alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},null,8,bt)):(i(),_("img",gt)),t("div",ft,[t("div",yt,[t("span",vt,c(n.nguoi_dung.name),1),t("span",xt,c(new Date(n.created_at).toLocaleString()),1)]),t("p",wt,c(n.noi_dung),1)])])]))),256))])])])])])],32)):f("",!0)}},Vt=T(kt,[["__scopeId","data-v-19f78bc3"]]);export{Vt as default};
