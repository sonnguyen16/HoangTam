import{Q as x,h as w,T as k,z as V,u as a,o as l,c as i,w as u,f as h,a as t,B as v,F as b,k as g,l as m,t as r,n as j,e as B,x as S,y as U}from"./app-6e91d9b8.js";/* empty css                                                                 */import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";const d=c=>(S("data-v-e4b7bba6"),c=c(),U(),c),T={key:0},I={class:"d-flex align-items-center"},L=d(()=>t("label",{for:"ngay_bat_dau",class:"font-weight-bold text-secondary mt-2"},"Bắt đầu:",-1)),M=d(()=>t("label",{for:"ngay_ket_thuc",class:"font-weight-bold text-secondary mt-2"},"Kết thúc:",-1)),N=d(()=>t("label",{class:"font-weight-bold text-secondary mt-2"},"Tình trạng",-1)),D=d(()=>t("option",{value:"0"},"Chưa thực hiện",-1)),F=d(()=>t("option",{value:"1"},"Đang thực hiện",-1)),z=d(()=>t("option",{value:"2"},"Đã hoàn thành",-1)),E=[D,F,z],O=d(()=>t("label",{for:"user",class:"font-weight-bold text-secondary mt-2"},"Người thực hiện:",-1)),A=["value"],H={class:"mt-1"},K=d(()=>t("label",{for:"mo_ta",class:"font-weight-bold text-success"},"Mô tả hạng mục:",-1)),Q={class:"mt-3"},X=d(()=>t("div",{class:"d-flex align-items-center mb-2"},[t("label",{for:"mo_ta",class:"font-weight-bold text-success mt-2"},"Attachments:"),t("span",{id:"fileList",class:"d-inline-block ml-3"})],-1)),q={key:0,class:"row"},G={class:"col-md-4"},J={class:"card"},P={class:"card-body p-0"},R={class:"table table-striped"},W=d(()=>t("thead",null,[t("tr",null,[t("th",null,"File")])],-1)),Y={colspan:"2"},Z=["href"],tt=d(()=>t("hr",null,null,-1)),et={class:"",id:"subtasks"},nt=d(()=>t("label",{for:"mo_ta",class:"font-weight-bold text-success"},"Hạng mục con:",-1)),st=["href"],at=d(()=>t("hr",null,null,-1)),ot={id:"comments",class:""},dt={class:"font-weight-bold"},lt={class:"card"},it={class:"card-body"},_t=["src"],ut={key:1,src:"/uploads/avatardefault.png",alt:"avatar",class:"rounded-full w-10 object-cover"},ct=["value"],rt=d(()=>t("input",{id:"comment",class:"form-control border-0 flex-1",placeholder:"Nhập bình luận"},null,-1)),ht=d(()=>t("button",{type:"submit",class:""},[t("i",{class:"fa fa-paper-plane text-lg text-primary"})],-1)),pt={style:{"max-height":"200px",overflow:"auto"}},bt={class:""},gt={class:"d-flex"},mt=["src"],ft={key:1,src:"/uploads/avatardefault.png",alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},vt={class:"flex-1 ml-3"},yt={class:"d-flex justify-content-between"},xt={class:"font-weight-bold"},wt={class:"text-secondary"},kt={class:"text-md"},Vt={__name:"ChiTiet2",props:{du_an:Object,users:Object},setup(c){const f=x(),s=c,p=w([]),n=k({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",mo_ta:"",trang_thai:"",parent_id:"",children:[],files:[],binh_luan:[]});V(()=>{n.id=s.du_an.id,n.ten=s.du_an.ten,n.ngay_bat_dau=s.du_an.ngay_bat_dau,n.ngay_ket_thuc=s.du_an.ngay_ket_thuc,n.user_id=s.du_an.user_id,$("#user").val(s.du_an.user_id).trigger("change"),n.mo_ta=s.du_an.mo_ta,n.trang_thai=s.du_an.trang_thai,n.parent_id=s.du_an.parent_id,n.children=s.du_an.children,n.files=s.du_an.files,p.value=s.du_an.files,n.binh_luan=s.du_an.binh_luan});function y(){axios({method:"post",url:route("binhluan.store"),data:{noi_dung:$("#comment").val(),du_an_id:s.du_an.id}}).then(_=>{$("#comment").val(""),s.du_an.binh_luan.push({noi_dung:_.data.noi_dung,nguoi_dung:_.data.nguoi_dung,created_at:_.data.created_at})}).catch(_=>{console.log(_)})}return(_,o)=>a(n).id?(l(),i("form",T,[u(t("input",{type:"hidden","onUpdate:modelValue":o[0]||(o[0]=e=>a(n).id=e),id:"id",class:"form-control"},null,512),[[h,a(n).id]]),u(t("input",{type:"text",class:"font-weight-bold border-0 text-lg pl-0 pb-0","onUpdate:modelValue":o[1]||(o[1]=e=>a(n).ten=e)},null,512),[[h,a(n).ten]]),t("div",I,[L,u(t("input",{type:"date","onUpdate:modelValue":o[2]||(o[2]=e=>a(n).ngay_bat_dau=e),id:"ngay_bat_dau",class:"border-0 mr-3 text-secondary"},null,512),[[h,a(n).ngay_bat_dau]]),M,u(t("input",{type:"date","onUpdate:modelValue":o[3]||(o[3]=e=>a(n).ngay_ket_thuc=e),id:"ngay_ket_thuc",class:"border-0 mr-3 text-secondary"},null,512),[[h,a(n).ngay_ket_thuc]]),N,u(t("select",{"onUpdate:modelValue":o[4]||(o[4]=e=>a(n).trang_thai=e),class:"border-0 active:outline-0 outline-0 focus:outline-0 mr-3 font-bold",id:"trang_thai"},E,512),[[v,a(n).trang_thai]]),O,u(t("select",{"onUpdate:modelValue":o[5]||(o[5]=e=>a(n).user_id=e),class:"border-0 outline-0 font-bold focus:outline-0",id:"user"},[(l(!0),i(b,null,g(c.users,e=>(l(),i("option",{value:e.id},r(e.name),9,A))),256))],512),[[v,a(n).user_id]])]),t("div",H,[K,u(t("textarea",{"onUpdate:modelValue":o[6]||(o[6]=e=>a(n).mo_ta=e),id:"mo_ta",class:"form-control border-0 pl-0",rows:"3"},null,512),[[h,a(n).mo_ta]])]),t("div",Q,[X,p.value.length>0?(l(),i("div",q,[t("div",G,[t("div",J,[t("div",P,[t("table",R,[W,t("tbody",null,[(l(!0),i(b,null,g(p.value,e=>(l(),i("tr",{key:e.id},[t("td",Y,[e.id?(l(),i("a",{key:0,href:`/uploads/du_an/${e.ten}`,target:"_blank",class:""},r(e.ten.length>40?e.ten.slice(0,40)+"...":e.ten),9,Z)):m("",!0)])]))),128))])])])])])])):m("",!0),tt,t("div",et,[nt,t("a",{class:"btn btn-primary btn-sm ml-3 font-weight-bold",href:_.route("duan.detail",{id:a(n).id})},"Xem chi tiết",8,st)]),at,t("div",ot,[t("p",dt,"Bình luận ("+r(s.du_an.binh_luan.length)+")",1),t("div",lt,[t("div",it,[t("div",{class:j(["d-flex",{"mb-4":s.du_an.binh_luan.length>0}])},[a(f).props.user.hinh_anh?(l(),i("img",{key:0,src:"/uploads/nhan_vien/"+a(f).props.user.hinh_anh,alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},null,8,_t)):(l(),i("img",ut)),t("form",{onSubmit:o[7]||(o[7]=B(e=>y(),["prevent"])),class:"flex-1 d-flex"},[t("input",{type:"hidden",value:s.du_an.id},null,8,ct),rt,ht],32)],2),t("div",pt,[(l(!0),i(b,null,g(s.du_an.binh_luan,e=>(l(),i("div",bt,[t("div",gt,[e.nguoi_dung.hinh_anh?(l(),i("img",{key:0,src:"/uploads/nhan_vien/"+e.nguoi_dung.hinh_anh,alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},null,8,mt)):(l(),i("img",ft)),t("div",vt,[t("div",yt,[t("span",xt,r(e.nguoi_dung.name),1),t("span",wt,r(new Date(e.created_at).toLocaleString()),1)]),t("p",kt,r(e.noi_dung),1)])])]))),256))])])])])])])):m("",!0)}},Ut=C(Vt,[["__scopeId","data-v-e4b7bba6"]]);export{Ut as default};
