import{i as c,o as i,c as u,a as t,e as k,m as g,t as s,u as m,l as M,F as C,k as N,O as B}from"./app-72c8dceb.js";import{h as y}from"./moment-a9aaa855.js";const D={id:"chitietnccmodal",class:"modal fade",tabindex:"-1",role:"dialog"},T={class:"modal-dialog modal-xl",role:"document"},w={class:"modal-content"},V={class:"modal-header pt-2"},O=t("h5",{class:"txt-color my-2 font-weight-bold"},"Chi tiết công nợ",-1),F={class:"modal-body space-y-2 px-4 mt-2"},P={class:"d-flex space-x-[80px] align-items-center"},W=t("b",{class:"mr-2"},"Từ ngày: ",-1),j=t("b",{class:"mr-2"},"Đến ngày: ",-1),q=t("b",{class:"mr-2"},"Nợ cũ: ",-1),E={class:"mt-2"},I={class:"table table-bordered table-responsive-md"},K=t("thead",null,[t("tr",null,[t("th",null,"STT"),t("th",null,"Mã phiếu"),t("th",null,"Ngày"),t("th",null,"Sản phẩm"),t("th",null,"ĐVT"),t("th",null,"Số lượng"),t("th",null,"Đơn giá"),t("th",null,"Thành tiền")])],-1),L={class:"text-center"},z={class:"text-center"},A={class:"quantity",style:{width:"8%"}},G={class:"money"},H={class:"money"},J=t("td",{colspan:"7",class:"font-weight-bold text-end"},"Nợ mới",-1),Q={class:"money"},X={__name:"ChiTietNhaCungCap",props:{nha_cung_cap:{type:Object,default:{}},ngay_bat_dau:{type:String,default:""},ngay_ket_thuc:{type:String,default:""}},setup(r){const a=r;function x(){$("#chitietnccmodal").modal("hide")}const d=c(()=>{var e;return(e=a.nha_cung_cap)==null?void 0:e.filter(n=>n.ma.startsWith("PC"))}),_=c(()=>{var e;return(e=a.nha_cung_cap)==null?void 0:e.filter(n=>n.ma.startsWith("NK"))}),h=c(()=>{var e;return(e=a.nha_cung_cap)==null?void 0:e.filter(n=>n.ngay>=a.ngay_bat_dau&&n.ngay<=a.ngay_ket_thuc)}),p=c(()=>{var e;return(e=_==null?void 0:_.value)==null?void 0:e.filter(n=>n.ngay<a.ngay_bat_dau).reduce((n,l)=>n+l.thanh_tien,0)}),b=c(()=>{var e;return(e=d==null?void 0:d.value)==null?void 0:e.filter(n=>n.ngay<a.ngay_bat_dau).reduce((n,l)=>n+l.thanh_tien,0)}),v=c(()=>{var e;return(e=_==null?void 0:_.value)==null?void 0:e.filter(n=>n.ngay>=a.ngay_bat_dau&&n.ngay<=a.ngay_ket_thuc).reduce((n,l)=>n+l.thanh_tien,0)}),f=c(()=>{var e;return(e=d==null?void 0:d.value)==null?void 0:e.filter(n=>n.ngay>=a.ngay_bat_dau&&n.ngay<=a.ngay_ket_thuc).reduce((n,l)=>n+l.thanh_tien,0)});function Y(){$("#chitietnccmodal").modal("hide"),B.post(route("baocaocongno.print"),{ngay_bat_dau:a.ngay_bat_dau,ngay_ket_thuc:a.ngay_ket_thuc,hdpc:h.value,ton_dau:p.value-b.value,ton_cuoi:v.value-f.value})}return(e,n)=>{var l;return i(),u("div",D,[t("div",T,[t("div",w,[t("div",V,[O,t("button",{type:"button",class:"close",onClick:k(x,["prevent"])},"×")]),t("div",F,[t("div",P,[t("p",null,[W,g(s(m(y)(r.ngay_bat_dau).format("DD/MM/YYYY")),1)]),t("p",null,[j,g(s(m(y)(r.ngay_ket_thuc).format("DD/MM/YYYY")),1)]),t("p",null,[q,g(s((p.value-b.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")||0),1)]),((l=h.value)==null?void 0:l.length)>0?(i(),u("a",{key:0,onClick:n[0]||(n[0]=k(o=>Y(),["prevent"])),class:"btn btn-primary btn-sm ml-auto mb-2"},"In Phiếu")):M("",!0)]),t("div",E,[t("table",I,[K,t("tbody",null,[(i(!0),u(C,null,N(h.value,(o,S)=>(i(),u("tr",null,[t("td",L,s(S+1),1),t("td",null,s(o.ma),1),t("td",null,s(m(y)(o.ngay).format("DD/MM/YYYY")),1),t("td",null,s(o.san_pham),1),t("td",z,s(o.dvt),1),t("td",A,s(o.so_luong),1),t("td",G,s(o.gia.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),t("td",H,s(o.thanh_tien.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)]))),256)),t("tr",null,[J,t("td",Q,s((v.value-f.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")||0),1)])])])])])])])])}}};export{X as default};
