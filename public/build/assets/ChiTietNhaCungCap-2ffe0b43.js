import{i as c,o as i,c as u,a as t,e as B,m as r,t as a,l as C,u as v,F as D,k as w,O as V}from"./app-d39ee91f.js";import{h as f}from"./moment-a9aaa855.js";const O={id:"chitietnccmodal",class:"modal fade",tabindex:"-1",role:"dialog"},F={class:"modal-dialog modal-xl",role:"document"},P={class:"modal-content"},W={class:"modal-header pt-2"},j=t("h5",{class:"txt-color my-2 font-weight-bold"},"Chi tiết công nợ",-1),q={class:"modal-body space-y-2 px-4 mt-2"},E={key:0},I=t("b",{class:"mr-2"},"Nhà cung cấp:",-1),K={class:"d-flex space-x-[80px] align-items-center"},L=t("b",{class:"mr-2"},"Từ ngày: ",-1),z=t("b",{class:"mr-2"},"Đến ngày: ",-1),A=t("b",{class:"mr-2"},"Nợ cũ: ",-1),G={class:"mt-2"},H={class:"table table-bordered table-responsive-md"},J=t("thead",null,[t("tr",null,[t("th",null,"STT"),t("th",null,"Mã phiếu"),t("th",null,"Ngày"),t("th",null,"Sản phẩm"),t("th",null,"ĐVT"),t("th",null,"Số lượng"),t("th",null,"Đơn giá"),t("th",null,"Thành tiền"),t("th",null,"Chi")])],-1),Q={class:"text-center"},R={class:"text-center"},U={class:"quantity",style:{width:"8%"}},X={class:"money"},Z={class:"money"},tt={class:"money"},nt=t("td",{colspan:"7",class:"font-weight-bold text-end"},"Tổng cộng",-1),et={class:"money"},at={class:"money"},st=t("td",{colspan:"7",class:"font-weight-bold text-end"},"Nợ mới",-1),lt={colspan:"2",class:"money"},_t={__name:"ChiTietNhaCungCap",props:{nha_cung_cap:{type:Object,default:{}},ngay_bat_dau:{type:String,default:""},ngay_ket_thuc:{type:String,default:""}},setup(h){const s=h;function M(){$("#chitietnccmodal").modal("hide")}const _=c(()=>{var e;return(e=s.nha_cung_cap)==null?void 0:e.filter(n=>n.ma.startsWith("PC"))}),d=c(()=>{var e;return(e=s.nha_cung_cap)==null?void 0:e.filter(n=>n.ma.startsWith("NK"))}),g=c(()=>{var e;return(e=s.nha_cung_cap)==null?void 0:e.filter(n=>n.ngay>=s.ngay_bat_dau&&n.ngay<=s.ngay_ket_thuc)}),m=c(()=>{var e;return(e=d==null?void 0:d.value)==null?void 0:e.filter(n=>n.ngay<s.ngay_bat_dau).reduce((n,l)=>n+l.thanh_tien,0)}),p=c(()=>{var e;return(e=_==null?void 0:_.value)==null?void 0:e.filter(n=>n.ngay<s.ngay_bat_dau).reduce((n,l)=>n+l.chi,0)}),y=c(()=>{var e;return(e=d==null?void 0:d.value)==null?void 0:e.filter(n=>n.ngay>=s.ngay_bat_dau&&n.ngay<=s.ngay_ket_thuc).reduce((n,l)=>n+l.thanh_tien,0)}),b=c(()=>{var e;return(e=_==null?void 0:_.value)==null?void 0:e.filter(n=>n.ngay>=s.ngay_bat_dau&&n.ngay<=s.ngay_ket_thuc).reduce((n,l)=>n+l.chi,0)});function N(){$("#chitietnccmodal").modal("hide"),V.post(route("baocaocongno.print"),{ngay_bat_dau:s.ngay_bat_dau,ngay_ket_thuc:s.ngay_ket_thuc,hdpc:g.value,ton_dau:m.value-p.value,so_tien_nhap_moi:y.value,so_tien_chi_moi:b.value})}return(e,n)=>{var l,k,x,S;return i(),u("div",O,[t("div",F,[t("div",P,[t("div",W,[j,t("button",{type:"button",class:"close",onClick:B(M,["prevent"])},"×")]),t("div",q,[((l=s.nha_cung_cap)==null?void 0:l.length)>0?(i(),u("p",E,[I,r(a(s.nha_cung_cap[0].ten_ncc),1)])):C("",!0),t("div",K,[t("p",null,[L,r(a(v(f)(h.ngay_bat_dau).format("DD/MM/YYYY")),1)]),t("p",null,[z,r(a(v(f)(h.ngay_ket_thuc).format("DD/MM/YYYY")),1)]),t("p",null,[A,r(a((m.value-p.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")||0),1)]),((k=g.value)==null?void 0:k.length)>0?(i(),u("a",{key:0,onClick:n[0]||(n[0]=B(o=>N(),["prevent"])),class:"btn btn-primary btn-sm ml-auto mb-2"},"In Phiếu")):C("",!0)]),t("div",G,[t("table",H,[J,t("tbody",null,[(i(!0),u(D,null,w(g.value,(o,T)=>{var Y;return i(),u("tr",null,[t("td",Q,a(T+1),1),t("td",null,a(o.ma),1),t("td",null,a(v(f)(o.ngay).format("DD/MM/YYYY")),1),t("td",null,a(o.san_pham),1),t("td",R,a(o.dvt),1),t("td",U,a(o.so_luong),1),t("td",X,a(o.gia.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),t("td",Z,a(o.thanh_tien.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),t("td",tt,a((Y=o.chi)==null?void 0:Y.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1)])}),256)),t("tr",null,[nt,t("td",et,a(((x=y.value)==null?void 0:x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))||0),1),t("td",at,a(((S=b.value)==null?void 0:S.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))||0),1)]),t("tr",null,[st,t("td",lt,a((m.value-p.value+y.value-b.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")||0),1)])])])])])])])])}}};export{_t as default};
