import{T as V,z as w,q as S,o as r,c as _,a as t,e as g,w as s,f as c,u as e,v as u,n as p,F as h,k as f,B as b,t as y,x as U,y as T}from"./app-1a80bf0b.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const i=l=>(U("data-v-9bb91f4f"),l=l(),T(),l),I={id:"duanmodal",class:"modal fade",tabindex:"-1",style:{"z-index":"1051"},role:"dialog"},N={class:"modal-dialog modal-lg",role:"document"},j={class:"modal-content"},B={class:"modal-header"},C={class:"modal-body"},E={class:"form-group-container"},z={class:"form-group-title"},A={key:0,class:"txt-color mb-0 font-weight-bold"},F={key:1,class:"txt-color mb-0 font-weight-bold"},L={class:"form-group"},O=i(()=>t("label",{for:"name"},"Tên dự án",-1)),q={class:"form-group"},H=i(()=>t("label",{for:"name"},"Người phụ trách",-1)),G=i(()=>t("option",{value:""},"Chọn người phụ trách",-1)),J=["value"],K={class:"form-group"},P=i(()=>t("label",{for:"nguoi_theo_doi"},"Người theo dõi",-1)),Q=["value"],R={class:"form-group"},W=i(()=>t("label",{for:"name"},"Ngày bắt đầu",-1)),X={class:"form-group"},Y=i(()=>t("label",{for:"name"},"Ngày kết thúc",-1)),Z={class:"form-group"},oo=i(()=>t("label",{for:"name"},"Mô tả",-1)),to={class:"form-group"},eo=i(()=>t("label",{for:"name"},"Tệp đính kèm",-1)),no={class:"modal-footer"},so=["disabled"],ao={__name:"DuAnModal",props:{du_an:Object,users:Object},emits:["reload"],setup(l,{emit:v}){const a=l,o=V({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",mo_ta:"",parent_id:"",children:[],nguoi_theo_doi:[],files:[]});w(()=>{o.id=a.du_an.id,o.ten=a.du_an.ten,o.ngay_bat_dau=a.du_an.ngay_bat_dau,o.ngay_ket_thuc=a.du_an.ngay_ket_thuc,o.user_id=a.du_an.user_id,o.mo_ta=a.du_an.mo_ta,o.parent_id=a.du_an.parent_id,o.children=a.du_an.children,o.nguoi_theo_doi=[],$("#nguoi_theo_doi").val(null).trigger("change"),o.files=a.du_an.files});const k=v,x=()=>{o.post(route("duan.store"),{onSuccess:()=>{k("reload",o.id),m(),o.parent_id&&o.children.length===0&&location.reload()},onError:()=>{console.log(o.errors)}})},m=()=>{o.reset(),o.clearErrors(),$("#files").val(""),$("#duanmodal").modal("hide")};return S(()=>{$("#nguoi_theo_doi").select2().on("change",function(M){o.nguoi_theo_doi=$(this).val()})}),(M,d)=>(r(),_("div",I,[t("div",N,[t("div",j,[t("div",B,[t("button",{type:"button",class:"close",onClick:g(m,["prevent"])},"×")]),t("form",{onSubmit:g(x,["prevent"])},[t("div",C,[s(t("input",{type:"hidden","onUpdate:modelValue":d[0]||(d[0]=n=>e(o).id=n),id:"id",class:"form-control"},null,512),[[c,e(o).id]]),t("div",E,[s(t("div",z,[e(o).parent_id?(r(),_("span",F,"Thêm hạng mục")):(r(),_("span",A,"Thêm dự án"))],512),[[u,!e(o).id]]),s(t("div",L,[O,s(t("input",{class:p([{"border-danger":e(o).errors.ten},"form-control"]),type:"text","onUpdate:modelValue":d[1]||(d[1]=n=>e(o).ten=n),id:"ten"},null,2),[[c,e(o).ten]])],512),[[u,!e(o).id]]),s(t("div",q,[H,s(t("select",{class:p([{"border-danger":e(o).errors.user_id},"form-control"]),"onUpdate:modelValue":d[2]||(d[2]=n=>e(o).user_id=n),id:"user_id"},[G,(r(!0),_(h,null,f(l.users,n=>(r(),_("option",{key:n.id,value:n.id},y(n.name),9,J))),128))],2),[[b,e(o).user_id]])],512),[[u,!e(o).id]]),t("div",K,[P,s(t("select",{id:"nguoi_theo_doi","onUpdate:modelValue":d[3]||(d[3]=n=>e(o).nguoi_theo_doi=n),class:p([{"border border-danger":e(o).errors.nguoi_theo_doi},"form-control"]),name:"nguoi_theo_doi[]",multiple:""},[(r(!0),_(h,null,f(l.users,n=>(r(),_("option",{value:n.id},y(n.name),9,Q))),256))],2),[[b,e(o).nguoi_theo_doi]])]),s(t("input",{type:"hidden","onUpdate:modelValue":d[4]||(d[4]=n=>e(o).parent_id=n)},null,512),[[c,e(o).parent_id]]),s(t("div",R,[W,s(t("input",{class:p([{"border-danger":e(o).errors.ngay_bat_dau},"form-control"]),type:"date","onUpdate:modelValue":d[5]||(d[5]=n=>e(o).ngay_bat_dau=n),id:"ngay_bat_dau"},null,2),[[c,e(o).ngay_bat_dau]])],512),[[u,!e(o).id]]),s(t("div",X,[Y,s(t("input",{class:p([{"border-danger":e(o).errors.ngay_ket_thuc},"form-control"]),type:"date","onUpdate:modelValue":d[6]||(d[6]=n=>e(o).ngay_ket_thuc=n),id:"ngay_ket_thuc"},null,2),[[c,e(o).ngay_ket_thuc]])],512),[[u,!e(o).id]]),s(t("div",Z,[oo,s(t("textarea",{class:p([{"border-danger":e(o).errors.mo_ta},"form-control"]),type:"text","onUpdate:modelValue":d[7]||(d[7]=n=>e(o).mo_ta=n),id:"mo_ta"},null,2),[[c,e(o).mo_ta]])],512),[[u,!e(o).id]]),s(t("div",to,[eo,t("input",{accept:".png, .jpg, .jpeg, .gif, .bmp, .doc, .docx, .xls, .xlsx, .pdf",type:"file",onInput:d[8]||(d[8]=n=>e(o).files=n.target.files),id:"files",multiple:""},null,32)],512),[[u,!e(o).id]])])]),t("div",no,[t("button",{type:"submit",disabled:e(o).processing,class:"btn btn-primary"},"Lưu",8,so),t("button",{type:"button",class:"btn btn-default",onClick:g(m,["prevent"])},"Hủy")])],32)])])]))}},ro=D(ao,[["__scopeId","data-v-9bb91f4f"]]);export{ro as default};
