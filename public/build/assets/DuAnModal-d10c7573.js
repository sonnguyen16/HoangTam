import{T as M,z as S,q as U,o as _,c as u,a as t,e as h,w as s,f as p,u as e,v as l,n as c,F as f,k as b,B as g,t as v,x as w,y as C}from"./app-5437a568.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const a=r=>(w("data-v-57c94f11"),r=r(),C(),r),D={id:"duanmodal",class:"modal fade",tabindex:"-1",style:{"z-index":"1051"},role:"dialog"},I={class:"modal-dialog modal-lg",role:"document"},N={class:"modal-content"},j={class:"modal-header"},B={class:"modal-body"},E={class:"form-group-container"},z={class:"form-group-title"},A={key:0,class:"txt-color mb-0 font-weight-bold"},F={key:1,class:"txt-color mb-0 font-weight-bold"},L={class:"form-group"},O=a(()=>t("label",{for:"name"},"Tên dự án",-1)),q={class:"form-group"},H=a(()=>t("label",{for:"name"},"Người phụ trách",-1)),G=a(()=>t("option",{value:""},"Chọn người phụ trách",-1)),J=["value"],K={class:"form-group"},P=a(()=>t("label",{for:"nguoi_theo_doi"},"Người theo dõi",-1)),Q=["value"],R={class:"form-group"},W=a(()=>t("label",{for:"name"},"Ngày bắt đầu",-1)),X={class:"form-group"},Y=a(()=>t("label",{for:"name"},"Ngày kết thúc",-1)),Z={class:"form-group"},oo=a(()=>t("label",{for:"name"},"Mô tả",-1)),to={class:"form-group"},eo=a(()=>t("label",{for:"name"},"Trạng thái",-1)),no=a(()=>t("option",{value:""},"Chọn trạng thái",-1)),so=a(()=>t("option",{value:"0"},"Chưa triển khai",-1)),ao=a(()=>t("option",{value:"1"},"Đang triển khai",-1)),io=a(()=>t("option",{value:"2"},"Đã hoàn thành",-1)),ro=[no,so,ao,io],lo={class:"form-group"},_o=a(()=>t("label",{for:"name"},"Tệp đính kèm",-1)),uo={class:"modal-footer"},co=["disabled"],po={__name:"DuAnModal",props:{du_an:Object,users:Object},emits:["reload"],setup(r,{emit:y}){const i=r,o=M({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",mo_ta:"",trang_thai:"",parent_id:"",children:[],nguoi_theo_doi:[],files:[]});S(()=>{o.id=i.du_an.id,o.ten=i.du_an.ten,o.ngay_bat_dau=i.du_an.ngay_bat_dau,o.ngay_ket_thuc=i.du_an.ngay_ket_thuc,o.user_id=i.du_an.user_id,o.mo_ta=i.du_an.mo_ta,o.trang_thai=i.du_an.trang_thai,o.parent_id=i.du_an.parent_id,o.children=i.du_an.children,o.nguoi_theo_doi=[],$("#nguoi_theo_doi").val(null).trigger("change"),o.files=i.du_an.files});const k=y,x=()=>{o.post(route("duan.store"),{onSuccess:()=>{k("reload",o.id),m(),o.parent_id&&o.children.length===0&&location.reload()},onError:()=>{console.log(o.errors)}})},m=()=>{o.reset(),o.clearErrors(),$("#files").val(""),$("#duanmodal").modal("hide")};return U(()=>{$("#nguoi_theo_doi").select2().on("change",function(V){o.nguoi_theo_doi=$(this).val()})}),(V,d)=>(_(),u("div",D,[t("div",I,[t("div",N,[t("div",j,[t("button",{type:"button",class:"close",onClick:h(m,["prevent"])},"×")]),t("form",{onSubmit:h(x,["prevent"])},[t("div",B,[s(t("input",{type:"hidden","onUpdate:modelValue":d[0]||(d[0]=n=>e(o).id=n),id:"id",class:"form-control"},null,512),[[p,e(o).id]]),t("div",E,[s(t("div",z,[r.du_an.id?(_(),u("span",A,"Sửa dự án")):(_(),u("span",F,"Thêm dự án"))],512),[[l,!e(o).id]]),s(t("div",L,[O,s(t("input",{class:c([{"border-danger":e(o).errors.ten},"form-control"]),type:"text","onUpdate:modelValue":d[1]||(d[1]=n=>e(o).ten=n),id:"ten"},null,2),[[p,e(o).ten]])],512),[[l,!e(o).id]]),s(t("div",q,[H,s(t("select",{class:c([{"border-danger":e(o).errors.user_id},"form-control"]),"onUpdate:modelValue":d[2]||(d[2]=n=>e(o).user_id=n),id:"user_id"},[G,(_(!0),u(f,null,b(r.users,n=>(_(),u("option",{key:n.id,value:n.id},v(n.name),9,J))),128))],2),[[g,e(o).user_id]])],512),[[l,!e(o).id]]),t("div",K,[P,s(t("select",{id:"nguoi_theo_doi","onUpdate:modelValue":d[3]||(d[3]=n=>e(o).nguoi_theo_doi=n),class:c([{"border border-danger":e(o).errors.nguoi_theo_doi},"form-control"]),name:"nguoi_theo_doi[]",multiple:""},[(_(!0),u(f,null,b(r.users,n=>(_(),u("option",{value:n.id},v(n.name),9,Q))),256))],2),[[g,e(o).nguoi_theo_doi]])]),s(t("input",{type:"hidden","onUpdate:modelValue":d[4]||(d[4]=n=>e(o).parent_id=n)},null,512),[[p,e(o).parent_id]]),s(t("div",R,[W,s(t("input",{class:c([{"border-danger":e(o).errors.ngay_bat_dau},"form-control"]),type:"date","onUpdate:modelValue":d[5]||(d[5]=n=>e(o).ngay_bat_dau=n),id:"ngay_bat_dau"},null,2),[[p,e(o).ngay_bat_dau]])],512),[[l,!e(o).id]]),s(t("div",X,[Y,s(t("input",{class:c([{"border-danger":e(o).errors.ngay_ket_thuc},"form-control"]),type:"date","onUpdate:modelValue":d[6]||(d[6]=n=>e(o).ngay_ket_thuc=n),id:"ngay_ket_thuc"},null,2),[[p,e(o).ngay_ket_thuc]])],512),[[l,!e(o).id]]),s(t("div",Z,[oo,s(t("textarea",{class:c([{"border-danger":e(o).errors.mo_ta},"form-control"]),type:"text","onUpdate:modelValue":d[7]||(d[7]=n=>e(o).mo_ta=n),id:"mo_ta"},null,2),[[p,e(o).mo_ta]])],512),[[l,!e(o).id]]),s(t("div",to,[eo,s(t("select",{class:c([{"border-danger":e(o).errors.trang_thai},"form-control"]),"onUpdate:modelValue":d[8]||(d[8]=n=>e(o).trang_thai=n),id:"trang_thai"},ro,2),[[g,e(o).trang_thai]])],512),[[l,!e(o).id]]),s(t("div",lo,[_o,t("input",{accept:".png, .jpg, .jpeg, .gif, .bmp, .doc, .docx, .xls, .xlsx, .pdf",type:"file",onInput:d[9]||(d[9]=n=>e(o).files=n.target.files),id:"files",multiple:""},null,32)],512),[[l,!e(o).id]])])]),t("div",uo,[t("button",{type:"submit",disabled:e(o).processing,class:"btn btn-primary"},"Lưu",8,co),t("button",{type:"button",class:"btn btn-default",onClick:h(m,["prevent"])},"Hủy")])],32)])])]))}},go=T(po,[["__scopeId","data-v-57c94f11"]]);export{go as default};
