import{T as S,z as V,q as w,o as r,c as _,a as t,e as g,w as s,f as c,u as e,v as u,n as m,F as h,k as f,B as b,t as y,x as U,y as D}from"./app-b43ce174.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";const l=i=>(U("data-v-36fc9e0a"),i=i(),D(),i),N={id:"duanmodal",class:"modal fade",tabindex:"-1",style:{"z-index":"1051"},role:"dialog"},T={class:"modal-dialog modal-lg",role:"document"},j={class:"modal-content"},B={class:"modal-header"},C={class:"modal-body"},E={class:"form-group-container"},z={class:"form-group-title"},A={key:0,class:"txt-color mb-0 font-weight-bold"},F={key:1,class:"txt-color mb-0 font-weight-bold"},L={class:"form-group"},O=l(()=>t("label",{for:"name"},"Tên dự án",-1)),q={class:"form-group"},H=l(()=>t("label",{for:"name"},"Người phụ trách",-1)),G=l(()=>t("option",{value:""},"Chọn người phụ trách",-1)),J=["value"],K={class:"form-group"},P=l(()=>t("label",{for:"nguoi_theo_doi"},"Người theo dõi",-1)),Q=["value"],R={class:"form-group"},W=l(()=>t("label",{for:"name"},"Ngày bắt đầu",-1)),X={class:"form-group"},Y=l(()=>t("label",{for:"name"},"Ngày kết thúc",-1)),Z={class:"form-group"},oo=l(()=>t("label",{for:"name"},"Mô tả",-1)),to={class:"form-group"},eo=l(()=>t("label",{for:"name"},"Tệp đính kèm",-1)),no={class:"modal-footer"},so=["disabled"],ao={__name:"DuAnModal",props:{du_an:Object,users:Object},emits:["reload"],setup(i,{emit:v}){const a=i,o=S({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",mo_ta:"",parent_id:"",children:[],nguoi_theo_doi:[],files:[]});V(()=>{o.id=a.du_an.id,o.ten=a.du_an.ten,o.ngay_bat_dau=a.du_an.ngay_bat_dau,o.ngay_ket_thuc=a.du_an.ngay_ket_thuc,o.user_id=a.du_an.user_id,o.mo_ta=a.du_an.mo_ta,o.parent_id=a.du_an.parent_id,o.children=a.du_an.children,o.nguoi_theo_doi=[],$("#nguoi_theo_doi").val(null).trigger("change"),o.files=a.du_an.files});const k=v,x=()=>{o.post(route("duan.store"),{onSuccess:()=>{k("reload",o.id),p(),o.parent_id&&o.children.length===0&&location.reload()},onError:()=>{console.log(o.errors)}})},p=()=>{o.reset(),o.clearErrors(),$("#files").val(""),$("#duanmodal").modal("hide")};return w(()=>{$("#nguoi_theo_doi").select2().on("change",function(M){o.nguoi_theo_doi=$(this).val()})}),(M,n)=>(r(),_("div",N,[t("div",T,[t("div",j,[t("div",B,[t("button",{type:"button",class:"close",onClick:g(p,["prevent"])},"×")]),t("form",{onSubmit:g(x,["prevent"])},[t("div",C,[s(t("input",{type:"hidden","onUpdate:modelValue":n[0]||(n[0]=d=>e(o).id=d),id:"id",class:"form-control"},null,512),[[c,e(o).id]]),t("div",E,[s(t("div",z,[i.du_an.id?(r(),_("span",A,"Sửa dự án")):(r(),_("span",F,"Thêm dự án"))],512),[[u,!e(o).id]]),s(t("div",L,[O,s(t("input",{class:m([{"border-danger":e(o).errors.ten},"form-control"]),type:"text","onUpdate:modelValue":n[1]||(n[1]=d=>e(o).ten=d),id:"ten"},null,2),[[c,e(o).ten]])],512),[[u,!e(o).id]]),s(t("div",q,[H,s(t("select",{class:m([{"border-danger":e(o).errors.user_id},"form-control"]),"onUpdate:modelValue":n[2]||(n[2]=d=>e(o).user_id=d),id:"user_id"},[G,(r(!0),_(h,null,f(i.users,d=>(r(),_("option",{key:d.id,value:d.id},y(d.name),9,J))),128))],2),[[b,e(o).user_id]])],512),[[u,!e(o).id]]),t("div",K,[P,s(t("select",{id:"nguoi_theo_doi","onUpdate:modelValue":n[3]||(n[3]=d=>e(o).nguoi_theo_doi=d),class:m([{"border border-danger":e(o).errors.nguoi_theo_doi},"form-control"]),name:"nguoi_theo_doi[]",multiple:""},[(r(!0),_(h,null,f(i.users,d=>(r(),_("option",{value:d.id},y(d.name),9,Q))),256))],2),[[b,e(o).nguoi_theo_doi]])]),s(t("input",{type:"hidden","onUpdate:modelValue":n[4]||(n[4]=d=>e(o).parent_id=d)},null,512),[[c,e(o).parent_id]]),s(t("div",R,[W,s(t("input",{class:m([{"border-danger":e(o).errors.ngay_bat_dau},"form-control"]),type:"date","onUpdate:modelValue":n[5]||(n[5]=d=>e(o).ngay_bat_dau=d),id:"ngay_bat_dau"},null,2),[[c,e(o).ngay_bat_dau]])],512),[[u,!e(o).id]]),s(t("div",X,[Y,s(t("input",{class:m([{"border-danger":e(o).errors.ngay_ket_thuc},"form-control"]),type:"date","onUpdate:modelValue":n[6]||(n[6]=d=>e(o).ngay_ket_thuc=d),id:"ngay_ket_thuc"},null,2),[[c,e(o).ngay_ket_thuc]])],512),[[u,!e(o).id]]),s(t("div",Z,[oo,s(t("textarea",{class:m([{"border-danger":e(o).errors.mo_ta},"form-control"]),type:"text","onUpdate:modelValue":n[7]||(n[7]=d=>e(o).mo_ta=d),id:"mo_ta"},null,2),[[c,e(o).mo_ta]])],512),[[u,!e(o).id]]),s(t("div",to,[eo,t("input",{accept:".png, .jpg, .jpeg, .gif, .bmp, .doc, .docx, .xls, .xlsx, .pdf",type:"file",onInput:n[8]||(n[8]=d=>e(o).files=d.target.files),id:"files",multiple:""},null,32)],512),[[u,!e(o).id]])])]),t("div",no,[t("button",{type:"submit",disabled:e(o).processing,class:"btn btn-primary"},"Lưu",8,so),t("button",{type:"button",class:"btn btn-default",onClick:g(p,["prevent"])},"Hủy")])],32)])])]))}},ro=I(ao,[["__scopeId","data-v-36fc9e0a"]]);export{ro as default};
