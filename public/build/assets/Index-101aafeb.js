import{h as r,i as D,j as N,o as e,b as T,d as k,a as t,e as c,w as M,f as S,u as _,p as B,c as s,k as V,F as O,g as f,m as v,O as u,t as i,l as j}from"./app-9116f07d.js";import{_ as E}from"./MainLayout-3cd8fa52.js";import L from"./DuAnModal-34d63214.js";import A from"./XemDuAnModal-cc331d85.js";/* empty css                     *//* empty css              */import"./_plugin-vue_export-helper-c27b6911.js";import"./TreeItem-1293b3c2.js";const F=t("div",{class:"card shadow"},[t("div",{class:"card-body card-brc"},[t("p",{class:"txt-color mb-0 font-weight-bold"},[v("Danh mục quản lý "),t("i",{class:"fa fa-angle-right mr-2 ml-2"}),v(" Quản lý dự án")])])],-1),q={class:"card shadow card-child",style:{}},H={class:"card-body"},I={class:"row mb-3"},K={class:"col-md-2"},Q={class:"col-md-10"},R={class:"row"},U=t("div",{class:"col-md-3"},null,-1),X=t("div",{class:"col-md-6"},null,-1),z={class:"col-md-3"},G={class:"input-group"},J=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary",type:"submit"},[t("i",{class:"fas fa-search"})])],-1),P={class:"table table-bordered table-responsive-md"},W=t("thead",null,[t("tr",null,[t("th",null,"Tên dự án"),t("th",null,"Ngày bắt đầu"),t("th",null,"Ngày kết thúc"),t("th",null,"Người phụ trách"),t("th",null,"Mô tả"),t("th",null,"Trạng thái"),t("th",null,"Thao tác")])],-1),Y={key:0},Z=t("td",{colspan:"7",class:"text-center"},"Không có dữ liệu",-1),tt=[Z],nt={key:0,class:"badge badge-warning"},at={key:1,class:"badge badge-primary"},et={key:2,class:"badge badge-success"},st={style:{width:"11%"}},dt=["href"],it=["onClick"],lt=["onClick"],gt={__name:"Index",props:{du_an_list:Object,nhan_vien_list:Object},setup(h){const y=h;let w=r({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",nhan_vien:{},mo_ta:"",trang_thai:"",parent_id:"",children:[],files:[]}),o=r({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",nhan_vien:{},mo_ta:"",trang_thai:"",parent_id:"",children:[],files:[]}),d=r("");function m(n){o.value={id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",mo_ta:"",trang_thai:"",parent_id:n,children:[],files:[]},$("#duanmodal").modal("show")}const p=D(()=>y.du_an_list);N(d,n=>{u.visit(route("duan.index",{search:n}),{preserveState:!0})});function g(n){o.value={id:n.id,ten:n.ten,ngay_bat_dau:n.ngay_bat_dau,ngay_ket_thuc:n.ngay_ket_thuc,user_id:n.user_id,mo_ta:n.mo_ta,trang_thai:n.trang_thai,parent_id:n.parent_id,children:n.children,files:n.files},$("#duanmodal").modal("show")}function x(n){confirm("Bạn có chắc chắn muốn xóa dự án này không?")&&u.delete(route("duan.delete",{id:n}),{onSuccess:()=>{u.visit(route("duan.index"))},onError:()=>{console.log(form.errors)}})}return(n,l)=>(e(),T(E,null,{default:k(()=>{var b;return[F,t("div",q,[t("div",H,[t("div",I,[t("div",K,[t("a",{onClick:l[0]||(l[0]=c(a=>m(""),["prevent"])),class:"btn btn-primary form-control"},"Thêm dự án")]),t("div",Q,[t("form",null,[t("div",R,[U,X,t("div",z,[t("div",G,[M(t("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>B(d)?d.value=a:d=a),type:"text",name:"search",class:"form-control",placeholder:"Tìm kiếm dự án"},null,512),[[S,_(d)]]),J])])])])])]),t("table",P,[W,t("tbody",null,[((b=p.value)==null?void 0:b.length)===0?(e(),s("tr",Y,tt)):(e(!0),s(O,{key:1},V(p.value,a=>(e(),s("tr",{key:a.id},[t("td",null,i(a.ten),1),t("td",null,i(new Date(a.ngay_bat_dau).toLocaleDateString()),1),t("td",null,i(new Date(a.ngay_bat_dau).toLocaleDateString()),1),t("td",null,i(a.nhan_vien.name),1),t("td",null,i(a.mo_ta),1),t("td",null,[a.trang_thai===0?(e(),s("span",nt,"Chưa triển khai")):a.trang_thai===1?(e(),s("span",at,"Đang triển khai")):a.trang_thai===2?(e(),s("span",et,"Hoàn thành")):j("",!0)]),t("td",st,[t("a",{class:"btn btn-primary btn-sm mr-2 ml-2",href:n.route("duan.detail",{id:a.id})},"Chi tiết",8,dt),t("a",{class:"btn btn-primary btn-sm d-inline-block mr-2",onClick:c(C=>g(a),["prevent"])},"Sửa",8,it),t("a",{class:"btn btn-danger btn-sm",onClick:c(C=>x(a.id),["prevent"])},"Xóa",8,lt)])]))),128))])])])]),f(L,{du_an:_(o),users:h.nhan_vien_list},null,8,["du_an","users"]),f(A,{du_an:_(w),onEdit:g,onAdd:m},null,8,["du_an"])]}),_:1}))}};export{gt as default};
