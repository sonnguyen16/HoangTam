import{h,i as D,j as T,q as I,o as l,b as j,d as C,a as e,e as M,w as N,f as S,u as i,p as k,c as r,k as B,F as O,g as m,O as E,n as V,t as c,x as F,y as R}from"./app-bb51c9ce.js";import{_ as q}from"./MainLayout-17f1cb56.js";import z from"./DuAnModal-5c338352.js";import{f as A}from"./script-4eb152de.js";import L from"./ChiTiet2-1e033113.js";import U from"./TheoDoi-cf7e78d0.js";import{l as X}from"./lodash-a33a19b6.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                     *//* empty css              *//* empty css                                                                 */const v=s=>(F("data-v-d14f0a5b"),s=s(),R(),s),H={class:"card shadow card-child",style:{}},J={class:"card-body p-0"},K={class:"row"},P={class:"col-md-3"},Q={class:"row"},W={class:"col-md-4"},Y={class:"col-md-8 pt-3 pl-3"},Z={class:"input-group"},tt=v(()=>e("div",{class:"input-group-append"},[e("button",{class:"btn btn-primary",type:"submit"},[e("i",{class:"fas fa-search"})])],-1)),et=v(()=>e("h4",{class:"txt-color font-weight-bold borders ml-3 mb-3"},"Danh sách dự án",-1)),at=["onClick"],ot={class:"d-flex align-items-center gap-[10px] ms-1"},nt={class:"font-bold mb-0 mt-[2px]"},st={class:"mb-0 ms-1 mt-2 text-secondary"},it={class:"d-flex justify-content-between align-items-center mt-2 mb-0"},_t={class:"d-flex align-items-center gap-[5px]"},dt=["src"],lt={key:1,src:"/uploads/avatardefault.png",alt:"",class:"object-cover",style:{width:"30px",height:"30px"}},rt={class:"text-secondary"},ct={class:"text-secondary"},ut={class:"col-md-7 p-3"},ht={class:"col-md-2 pt-3 pr-4"},mt={__name:"Index",props:{du_an_list:Object,nhan_vien_list:Object},setup(s){const f=s;let u=h({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",nhan_vien:{},mo_ta:"",trang_thai:"",parent_id:"",children:[],files:[],binh_luan:[]}),o=h({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",nhan_vien:{},mo_ta:"",trang_thai:"",parent_id:"",children:[],files:[],binh_luan:[],nguoi_theo_doi:[]}),_=h("");function b(t){u.value={id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",mo_ta:"",trang_thai:"",parent_id:t,children:[],files:[]},$("#duanmodal").modal("show")}const d=D(()=>f.du_an_list);T(_,t=>{E.visit(route("duan.index",{search:t}),{preserveState:!0})});function p(t){o.value={id:t.id,ten:t.ten,ngay_bat_dau:t.ngay_bat_dau,ngay_ket_thuc:t.ngay_ket_thuc,user_id:t.user_id,mo_ta:t.mo_ta,trang_thai:t.trang_thai,parent_id:t.parent_id,children:t.children,files:t.files,binh_luan:t.binh_luan,nguoi_theo_doi:t.nguoi_theo_doi}}I(()=>{p(d.value[0]?d.value[0]:{})});function y(){u.value={...o.value},$("#duanmodal").modal("show")}function x(t){o.value.nguoi_theo_doi=o.value.nguoi_theo_doi.filter(n=>n.id!=t),d.value.find(n=>n.id==o.value.id).nguoi_theo_doi=X.cloneDeep(o.value.nguoi_theo_doi),axios({method:"post",url:route("dexuat.xoatheodoi",{id:t})})}function w(t){t&&(o.value.nguoi_theo_doi=[...d.value.find(n=>n.id==t).nguoi_theo_doi])}return(t,n)=>(l(),j(q,null,{default:C(()=>[e("div",H,[e("div",J,[e("div",K,[e("div",P,[e("div",Q,[e("div",W,[e("a",{onClick:n[0]||(n[0]=M(a=>b(""),["prevent"])),class:"btn btn-primary form-control m-3"},"Thêm dự án")]),e("div",Y,[e("div",Z,[N(e("input",{"onUpdate:modelValue":n[1]||(n[1]=a=>k(_)?_.value=a:_=a),type:"text",name:"search",class:"form-control",placeholder:"Tìm kiếm dự án"},null,512),[[S,i(_)]]),tt])])]),et,(l(!0),r(O,null,B(d.value,a=>{var g;return l(),r("div",{onClick:pt=>p(a),class:V(["p-3 border-bottom",{"border-s-4 border-neutral-400":a.id==i(o).id},{"bg-neutral-100":a.trang_thai==0},{"bg-blue-200":a.trang_thai==1},{"bg-green-300":a.trang_thai==2}])},[e("div",ot,[e("h5",nt,c(a.ten),1)]),e("p",st,c(((g=a.mo_ta)==null?void 0:g.length)>100?a.mo_ta.slice(0,100)+"...":a.mo_ta),1),e("div",it,[e("div",_t,[a.nhan_vien.hinh_anh?(l(),r("img",{key:0,src:"/uploads/nhan_vien/"+a.nhan_vien.hinh_anh,alt:"",class:"object-cover",style:{width:"30px",height:"30px","border-radius":"50%"}},null,8,dt)):(l(),r("img",lt)),e("span",rt,c(a.created_by.name),1)]),e("span",ct,c(i(A)(a.created_at)),1)])],10,at)}),256))]),e("div",ut,[m(L,{du_an:i(o),users:s.nhan_vien_list},null,8,["du_an","users"])]),e("div",ht,[m(U,{du_an:i(o),onEditNguoiTheoDoi:y,onXoaNguoiTheoDoi:x},null,8,["du_an"])])])])]),m(z,{du_an:i(u),users:s.nhan_vien_list,onReload:w},null,8,["du_an","users"])]),_:1}))}},Ct=G(mt,[["__scopeId","data-v-d14f0a5b"]]);export{Ct as default};
