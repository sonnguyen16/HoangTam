import{h,i as D,j as T,q as I,o as l,b as j,d as C,a as e,e as M,w as N,f as S,u as i,p as k,c,k as B,F as O,g as m,O as E,n as V,t as r,x as F,y as R}from"./app-53c49383.js";import{_ as q}from"./MainLayout-15c5d275.js";import z from"./DuAnModal-9c05c9d5.js";import{f as A}from"./script-4eb152de.js";import L from"./ChiTiet2-4f40eda3.js";import U from"./TheoDoi-ddb6c9eb.js";import{l as X}from"./lodash-5f272ffb.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                     *//* empty css              *//* empty css                                                                 */const g=s=>(F("data-v-43c9f385"),s=s(),R(),s),H={class:"card shadow card-child",style:{}},J={class:"card-body p-0"},K={class:"row"},P={class:"col-md-3"},Q={class:"row"},W={class:"col-md-4"},Y={class:"col-md-8 pt-3 pl-3"},Z={class:"input-group"},tt=g(()=>e("div",{class:"input-group-append"},[e("button",{class:"btn btn-primary",type:"submit"},[e("i",{class:"fas fa-search"})])],-1)),et=g(()=>e("h4",{class:"txt-color font-weight-bold ml-3 mb-3"},"Danh sách dự án",-1)),at=["onClick"],ot={class:"d-flex align-items-center gap-[10px] ms-1"},nt={class:"font-bold mb-0 mt-[2px]"},st={class:"mb-0 ms-1 mt-2 text-secondary"},it={class:"d-flex justify-content-between align-items-center mt-2 mb-0"},dt={class:"d-flex align-items-center gap-[5px]"},_t=["src"],lt={key:1,src:"/uploads/avatardefault.png",alt:"",class:"object-cover",style:{width:"30px",height:"30px"}},ct={class:"text-secondary"},rt={class:"text-secondary"},ut={class:"col-md-7 p-3"},ht={class:"col-md-2 pt-3 pr-4"},mt={__name:"Index",props:{du_an_list:Object,nhan_vien_list:Object},setup(s){const f=s;let u=h({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",nhan_vien:{},mo_ta:"",trang_thai:"",parent_id:"",children:[],files:[],binh_luan:[]}),o=h({id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",nhan_vien:{},mo_ta:"",trang_thai:"",parent_id:"",children:[],files:[],binh_luan:[],nguoi_theo_doi:[]}),d=h("");function b(t){u.value={id:"",ten:"",ngay_bat_dau:"",ngay_ket_thuc:"",user_id:"",mo_ta:"",trang_thai:"",parent_id:t,children:[],files:[]},$("#duanmodal").modal("show")}const _=D(()=>f.du_an_list);T(d,t=>{E.visit(route("duan.index",{search:t}),{preserveState:!0})});function p(t){o.value={id:t.id,ten:t.ten,ngay_bat_dau:t.ngay_bat_dau,ngay_ket_thuc:t.ngay_ket_thuc,user_id:t.user_id,mo_ta:t.mo_ta,trang_thai:t.trang_thai,parent_id:t.parent_id,children:t.children,files:t.files,binh_luan:t.binh_luan,nguoi_theo_doi:t.nguoi_theo_doi}}I(()=>{p(_.value[0]?_.value[0]:{})});function y(){u.value={...o.value},$("#duanmodal").modal("show")}function x(t){o.value.nguoi_theo_doi=o.value.nguoi_theo_doi.filter(n=>n.id!=t),_.value.find(n=>n.id==o.value.id).nguoi_theo_doi=X.cloneDeep(o.value.nguoi_theo_doi),axios({method:"post",url:route("dexuat.xoatheodoi",{id:t})})}function w(t){t&&(o.value.nguoi_theo_doi=[..._.value.find(n=>n.id==t).nguoi_theo_doi])}return(t,n)=>(l(),j(q,null,{default:C(()=>[e("div",H,[e("div",J,[e("div",K,[e("div",P,[e("div",Q,[e("div",W,[e("a",{onClick:n[0]||(n[0]=M(a=>b(""),["prevent"])),class:"btn btn-primary form-control m-3"},"Thêm dự án")]),e("div",Y,[e("div",Z,[N(e("input",{"onUpdate:modelValue":n[1]||(n[1]=a=>k(d)?d.value=a:d=a),type:"text",name:"search",class:"form-control",placeholder:"Tìm kiếm dự án"},null,512),[[S,i(d)]]),tt])])]),et,(l(!0),c(O,null,B(_.value,a=>{var v;return l(),c("div",{onClick:pt=>p(a),class:V(["p-3 border-bottom",{"bg-blue-200":i(o).id===a.id},{"bg-neutral-100 ":i(o).id!==a.id}])},[e("div",ot,[e("h5",nt,r(a.ten),1)]),e("p",st,r(((v=a.mo_ta)==null?void 0:v.length)>100?a.mo_ta.slice(0,100)+"...":a.mo_ta),1),e("div",it,[e("div",dt,[a.nhan_vien.hinh_anh?(l(),c("img",{key:0,src:"/uploads/nhan_vien/"+a.nhan_vien.hinh_anh,alt:"",class:"object-cover",style:{width:"30px",height:"30px","border-radius":"50%"}},null,8,_t)):(l(),c("img",lt)),e("span",ct,r(a.created_by.name),1)]),e("span",rt,r(i(A)(a.created_at)),1)])],10,at)}),256))]),e("div",ut,[m(L,{du_an:i(o),users:s.nhan_vien_list},null,8,["du_an","users"])]),e("div",ht,[m(U,{du_an:i(o),onEditNguoiTheoDoi:y,onXoaNguoiTheoDoi:x},null,8,["du_an"])])])])]),m(z,{du_an:i(u),users:s.nhan_vien_list,onReload:w},null,8,["du_an","users"])]),_:1}))}},Ct=G(mt,[["__scopeId","data-v-43c9f385"]]);export{Ct as default};
