import{Q as T,h as p,q as C,i as I,j,o as l,b as N,d as S,a as o,e as M,w as B,f as O,u as s,p as E,c as u,k as V,F,g as c,O as v,n as P,t as r,x as R,y as k}from"./app-1a80bf0b.js";import{_ as q}from"./MainLayout-9f06e024.js";import z from"./DeXuatModal-6de221dc.js";import{f as L}from"./script-4eb152de.js";import{_ as Q}from"./Pagination-006357ea.js";import U from"./ChiTiet-ed6a908d.js";import X from"./TheoDoi-849ab98b.js";import{l as A}from"./lodash-7b36f5c8.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                     *//* empty css              */const f=n=>(R("data-v-0746b43e"),n=n(),k(),n),H={class:"card shadow card-child",style:{}},J={class:"card-body p-0"},K={class:"row"},W={class:"col-md-3"},Y={class:"row"},Z={class:"col-md-4"},ee={class:"col-md-8 pt-3 pl-3"},te={class:"input-group"},oe=f(()=>o("div",{class:"input-group-append"},[o("button",{class:"btn btn-primary",type:"submit"},[o("i",{class:"fas fa-search"})])],-1)),ae=f(()=>o("h4",{class:"txt-color font-weight-bold ml-3 mb-3"},"Danh sách đề xuất",-1)),ie=["onClick"],se={class:"d-flex align-items-center gap-[10px] ms-1"},ne={class:"font-bold mb-0 mt-[2px]"},de={class:"mb-0 ms-1 mt-2 text-secondary"},_e={class:"d-flex justify-content-between align-items-center mt-2 mb-0"},le={class:"d-flex align-items-center gap-[5px]"},ue=["src"],ce={key:1,src:"/uploads/avatardefault.png",alt:"",class:"object-cover",style:{width:"30px",height:"30px"}},re={class:"text-secondary"},he={class:"text-secondary"},pe={class:"col-md-7 p-3"},me={class:"col-md-2 pt-3 pr-2"},ge={__name:"Index",props:{de_xuat_list:Object,nhan_vien_list:Object},setup(n){const m=n;T();let h=p({id:"",ten:"",noi_dung:"",nguoi_duyet:"",nguoi_theo_doi:[],file:"",trang_thai:0}),e=p({id:"",ten:"",noi_dung:"",nguoi_duyet:{},nguoi_theo_doi:[],created_at:"",trang_thai:0,created_by:{},files:[],binh_luan:[]});C(()=>{g(m.de_xuat_list.data[0])});let d=p("");function b(){h.value={id:"",ten:"",noi_dung:"",nguoi_duyet:"",nguoi_theo_doi:[],file:"",trang_thai:0},$("#dexuatmodal").modal("show")}let _=I(()=>m.de_xuat_list);j(d,t=>{v.visit(route("dexuat.index",{search:t}),{preserveState:!0})});function x(t){v.visit(t,{preserveState:!0})}function g(t){e.value.id=t.id,e.value.ten=t.ten,e.value.noi_dung=t.noi_dung,e.value.nguoi_duyet=t.nguoi_duyet,e.value.nguoi_theo_doi=t.nguoi_theo_doi,e.value.trang_thai=t.trang_thai,e.value.created_by=t.created_by,e.value.created_at=t.created_at,e.value.files=t.files,e.value.binh_luan=t.binh_luan}function y(){h.value={id:e.value.id,ten:e.value.ten,noi_dung:e.value.noi_dung,nguoi_duyet:e.value.nguoi_duyet,nguoi_theo_doi:e.value.nguoi_theo_doi.map(t=>t.user_id),file:[]},$("#dexuatmodal").modal("show")}function w(t){e.value.nguoi_theo_doi=e.value.nguoi_theo_doi.filter(i=>i.id!=t),_.value.data.find(i=>i.id==e.value.id).nguoi_theo_doi=A.cloneDeep(e.value.nguoi_theo_doi),axios({method:"post",url:route("dexuat.xoatheodoi",{id:t})})}function D(t){t&&(e.value.nguoi_duyet=_.value.data.find(i=>i.id==t).nguoi_duyet,e.value.nguoi_theo_doi=[..._.value.data.find(i=>i.id==t).nguoi_theo_doi])}return(t,i)=>(l(),N(q,null,{default:S(()=>[o("div",H,[o("div",J,[o("div",K,[o("div",W,[o("div",Y,[o("div",Z,[o("a",{onClick:M(b,["prevent"]),class:"btn btn-primary form-control m-3"},"Thêm đề xuất")]),o("div",ee,[o("div",te,[B(o("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>E(d)?d.value=a:d=a),type:"text",name:"search",class:"form-control",placeholder:"Tìm kiếm đề xuất"},null,512),[[O,s(d)]]),oe])])]),ae,(l(!0),u(F,null,V(s(_).data,a=>(l(),u("div",{onClick:ve=>g(a),class:P(["p-3 border-bottom",{"border-s-4 border-neutral-400":a.id==s(e).id},{"bg-neutral-100":a.trang_thai==0},{"bg-green-300":a.trang_thai==1}])},[o("div",se,[o("h5",ne,r(a.ten),1)]),o("p",de,r(a.noi_dung.length>100?a.noi_dung.slice(0,100)+"...":a.noi_dung),1),o("div",_e,[o("div",le,[a.created_by.hinh_anh?(l(),u("img",{key:0,src:"/uploads/nhan_vien/"+a.created_by.hinh_anh,alt:"",class:"object-cover",style:{width:"30px",height:"30px","border-radius":"50%"}},null,8,ue)):(l(),u("img",ce)),o("span",re,r(a.created_by.name),1)]),o("span",he,r(s(L)(a.created_at)),1)])],10,ie))),256)),c(Q,{"all-data":s(_),onChangePage:x},null,8,["all-data"])]),o("div",pe,[c(U,{de_xuat_selected:s(e)},null,8,["de_xuat_selected"])]),o("div",me,[c(X,{de_xuat_selected:s(e),onEditNguoiTheoDoi:y,onXoaNguoiTheoDoi:w},null,8,["de_xuat_selected"])])])])]),c(z,{de_xuat:s(h),nhan_vien_list:n.nhan_vien_list,onReload:D},null,8,["de_xuat","nhan_vien_list"])]),_:1}))}},Se=G(ge,[["__scopeId","data-v-0746b43e"]]);export{Se as default};
