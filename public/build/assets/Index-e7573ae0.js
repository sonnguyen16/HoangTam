import{Q as P,h as m,i as Q,j as q,o as a,b as z,d as E,a as t,e as p,w as I,f as R,u as e,p as U,c as n,k as r,F as d,g as N,t as l,m as _,n as C,l as D,O as B}from"./app-5cd23246.js";import{_ as A}from"./MainLayout-40f47581.js";import G from"./DeXuatModal-297aa422.js";import{f as S}from"./script-4eb152de.js";import{_ as H}from"./Pagination-1424a50b.js";/* empty css                     *//* empty css              */import"./_plugin-vue_export-helper-c27b6911.js";const J=t("div",{class:"card shadow"},[t("div",{class:"card-body card-brc"},[t("p",{class:"txt-color mb-0 font-weight-bold"},[_("Danh mục quản lý "),t("i",{class:"fa fa-angle-right mr-2 ml-2"}),_(" Quản lý đề xuất")])])],-1),K={class:"card shadow card-child",style:{}},W={class:"card-body p-0"},X={class:"row"},Y={class:"col-md-3"},Z={class:"row"},tt={class:"col-md-4"},st={class:"col-md-8 pt-3 pl-3"},et={class:"input-group"},at=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary",type:"submit"},[t("i",{class:"fas fa-search"})])],-1),ot=t("h4",{class:"txt-color font-weight-bold ml-3 mb-3"},"Danh sách đề xuất",-1),nt=["onClick"],lt={class:"d-flex align-items-center gap-[10px] ms-1"},it=["id","checked"],ct={class:"font-bold mb-0 mt-[2px]"},dt={class:"mb-0 ms-1 mt-2 text-secondary"},_t={class:"d-flex justify-content-between align-items-center mt-2 mb-0"},ht={class:"d-flex align-items-center gap-[5px]"},rt=["src"],ut={key:1,src:"/uploads/avatardefault.png",alt:"",class:"object-cover",style:{width:"30px",height:"30px"}},mt={class:"text-secondary"},pt={class:"text-secondary"},gt={class:"col-md-6 p-3"},vt={class:"font-weight-bold"},ft={class:"text-secondary"},bt={key:0,class:"text-danger ml-1"},xt={key:1,class:"text-success ml-1"},yt=t("h5",{class:"mb-0 mt-5"},"Thông tin đề xuất",-1),wt=t("hr",{class:"mt-2 mb-3"},null,-1),kt={class:"text-secondary"},jt={class:"text-md"},Nt=t("i",{class:"fa fa-user me-2"},null,-1),Ct={class:"font-weight-bold text-black ms-2 text-md"},Dt={class:"text-md"},$t=t("i",{class:"fa fa-clock me-2"},null,-1),Bt={class:"ms-2 text-md text-black"},St={class:"text-md"},Tt=t("i",{class:"fa fa-file me-2"},null,-1),Vt={class:"ms-2 text-md text-black"},Mt=t("h5",{class:"mb-0 mt-5"},"File đính kèm",-1),Ot=t("hr",{class:"mt-2 mb-3"},null,-1),Ft={class:"space-y-3"},Lt=["href"],Pt=t("h5",{class:"mb-0 mt-5"},"Bình luận",-1),Qt=t("hr",{class:"mt-2 mb-3"},null,-1),qt={class:"card elevation-2"},zt={class:"card-body"},Et=["src"],It={key:1,src:"/uploads/avatardefault.png",alt:"avatar",class:"rounded-full w-10 object-cover"},Rt=["value"],Ut=t("input",{id:"comment",class:"form-control border-0 flex-1",placeholder:"Nhập bình luận"},null,-1),At=t("button",{type:"submit",class:""},[t("i",{class:"fa fa-paper-plane text-lg text-primary"})],-1),Gt={class:""},Ht={class:"d-flex"},Jt=["src"],Kt={key:1,src:"/uploads/avatardefault.png",alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},Wt={class:"flex-1 ml-3"},Xt={class:"d-flex justify-content-between"},Yt={class:"font-weight-bold"},Zt={class:"text-secondary"},ts={class:"text-md"},ss={class:"col-md-3 pt-3 pr-4"},es={class:"card p-3 elevation-2"},as=t("h5",{class:"font-weight-bold"},"Người duyệt",-1),os=t("hr",{class:"mt-1 mb-2"},null,-1),ns={class:"d-flex align-items-center gap-[10px] my-1"},ls=["src"],is={key:1,src:"/uploads/avatardefault.png",alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},cs={class:"font-weight-bold"},ds={class:"font-weight-bold text-secondary"},_s={class:"card p-3 elevation-2"},hs=t("h5",{class:"font-weight-bold"},"Người theo dõi",-1),rs=t("hr",{class:"mt-1 mb-2"},null,-1),us={class:"d-flex align-items-center gap-[10px] my-1"},ms=["src"],ps={key:1,src:"/uploads/avatardefault.png",alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},gs={class:"font-weight-bold"},vs={class:"font-weight-bold text-secondary"},Cs={__name:"Index",props:{de_xuat_list:Object,nhan_vien_list:Object},setup(g){const T=g,v=P();let f=m({id:"",ten:"",noi_dung:"",nguoi_duyet:"",nguoi_theo_doi:[],file:"",trang_thai:0}),o=m({}),h=m("");function V(){f.value={id:"",ten:"",noi_dung:"",nguoi_duyet:"",nguoi_theo_doi:[],file:"",trang_thai:0},$("#dexuatmodal").modal("show")}const b=Q(()=>T.de_xuat_list);q(h,i=>{B.visit(route("dexuat.index",{search:i}),{preserveState:!0})});function M(i){B.visit(i,{preserveState:!0})}function O(i){o.value=i}function F(){axios({method:"post",url:route("binhluan.store"),data:{noi_dung:$("#comment").val(),de_xuat_id:o.value.id}}).then(i=>{$("#comment").val(""),o.value.binh_luan.push({noi_dung:i.data.noi_dung,nguoi_dung:i.data.nguoi_dung,created_at:i.data.created_at})}).catch(i=>{console.log(i)})}function L(i){axios({method:"post",url:route("dexuat.duyet",{id:i.target.id}),data:{trang_thai:i.target.checked?1:0}}).then(c=>{o.value.trang_thai=c.data.trang_thai}).catch(c=>{console.log(c)})}return(i,c)=>(a(),z(A,null,{default:E(()=>{var x,y,w;return[J,t("div",K,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[t("a",{onClick:p(V,["prevent"]),class:"btn btn-primary form-control m-3"},"Thêm đề xuất")]),t("div",st,[t("div",et,[I(t("input",{"onUpdate:modelValue":c[0]||(c[0]=s=>U(h)?h.value=s:h=s),type:"text",name:"search",class:"form-control",placeholder:"Tìm kiếm đề xuất"},null,512),[[R,e(h)]]),at])])]),ot,(a(!0),n(d,null,r(b.value.data,s=>(a(),n("div",{onClick:u=>O(s),class:C(["p-3 border-bottom",{"bg-blue-200":e(o).id===s.id},{"bg-neutral-100 ":e(o).id!==s.id}])},[t("div",lt,[t("input",{id:s.id,onChange:p(L,["prevent"]),type:"checkbox",checked:s.trang_thai==1},null,40,it),t("h5",ct,l(s.ten),1)]),t("p",dt,l(s.noi_dung.length>100?s.noi_dung.slice(0,100)+"...":s.noi_dung),1),t("div",_t,[t("div",ht,[s.created_by.hinh_anh?(a(),n("img",{key:0,src:"/uploads/nhan_vien/"+s.created_by.hinh_anh,alt:"",class:"object-cover",style:{width:"50px",height:"50px"}},null,8,rt)):(a(),n("img",ut)),t("span",mt,l(s.created_by.name),1)]),t("span",pt,l(e(S)(s.created_at)),1)])],10,nt))),256)),N(H,{"all-data":b.value,onChangePage:M},null,8,["all-data"])]),t("div",gt,[e(o).id?(a(),n(d,{key:0},[t("h4",vt,l(e(o).ten),1),t("span",ft,[_("Trạng thái: "),e(o).trang_thai===String(0)?(a(),n("span",bt,"Chưa duyệt")):(a(),n("span",xt,"Đã duyệt"))]),yt,wt,t("div",kt,[t("p",jt,[Nt,_(" Người tạo: "),t("span",Ct,l(e(o).created_by.name),1)]),t("p",Dt,[$t,_(" Ngày tạo: "),t("span",Bt,l(e(S)(e(o).created_at)),1)]),t("p",St,[Tt,_(" Nội dung: "),t("span",Vt,l(e(o).noi_dung),1)])]),Mt,Ot,t("ul",Ft,[(a(!0),n(d,null,r(e(o).files,s=>(a(),n("li",{key:s.id},[t("a",{href:`/uploads/de_xuat/${s.ten}`,target:"_blank"},l(s.ten),9,Lt)]))),128))]),Pt,Qt,t("div",qt,[t("div",zt,[t("div",{class:C(["d-flex",{"mb-4":e(o).binh_luan.length>0}])},[e(v).props.user.hinh_anh?(a(),n("img",{key:0,src:"/uploads/nhan_vien/"+e(v).props.user.hinh_anh,alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},null,8,Et)):(a(),n("img",It)),t("form",{onSubmit:p(F,["prevent"]),class:"flex-1 d-flex"},[t("input",{type:"hidden",value:e(o).id},null,8,Rt),Ut,At],32)],2),(a(!0),n(d,null,r(e(o).binh_luan,s=>(a(),n("div",Gt,[t("div",Ht,[s.nguoi_dung.hinh_anh?(a(),n("img",{key:0,src:"/uploads/nhan_vien/"+s.nguoi_dung.hinh_anh,alt:"avatar",class:"rounded-full w-10 h-10 object-cover"},null,8,Jt)):(a(),n("img",Kt)),t("div",Wt,[t("div",Xt,[t("span",Yt,l(s.nguoi_dung.name),1),t("span",Zt,l(new Date(s.created_at).toLocaleString()),1)]),t("p",ts,l(s.noi_dung),1)])])]))),256))])])],64)):D("",!0)]),t("div",ss,[e(o).id?(a(),n(d,{key:0},[t("div",es,[as,os,t("div",ns,[(x=e(o).nguoi_duyet)!=null&&x.hinh_anh?(a(),n("img",{key:0,src:"/uploads/nhan_vien/"+e(o).nguoi_duyet.hinh_anh,alt:"avatar",class:"rounded-full w-10 h-10 object-cover elevation-2"},null,8,ls)):(a(),n("img",is)),t("span",cs,l((y=e(o).nguoi_duyet)==null?void 0:y.name),1),t("span",ds,l((w=e(o).nguoi_duyet)==null?void 0:w.email),1)])]),t("div",_s,[hs,rs,(a(!0),n(d,null,r(e(o).nguoi_theo_doi,s=>{var u,k,j;return a(),n("div",us,[(u=s.user)!=null&&u.hinh_anh?(a(),n("img",{key:0,src:"/uploads/nhan_vien/"+s.user.hinh_anh,alt:"avatar",class:"rounded-full w-10 h-10 object-cover elevation-2"},null,8,ms)):(a(),n("img",ps)),t("span",gs,l((k=s.user)==null?void 0:k.name),1),t("span",vs,l((j=s.user)==null?void 0:j.email),1)])}),256))])],64)):D("",!0)])])])]),N(G,{de_xuat:e(f),nhan_vien_list:g.nhan_vien_list},null,8,["de_xuat","nhan_vien_list"])]}),_:1}))}};export{Cs as default};
