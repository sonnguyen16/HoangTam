import{T as b,z as y,q as C,A as w,o as a,c as s,a as o,e as m,w as l,f as r,u as t,n as _,B as c,F as u,k as p,t as g,O as k}from"./app-451a1b70.js";import{h as U}from"./moment-a9aaa855.js";const V={id:"phieuthuchimodal",class:"modal fade",role:"dialog"},x={class:"modal-dialog modal-lg",role:"document"},M={class:"modal-content"},O={class:"modal-header"},S={class:"modal-body"},D={class:"form-group-container"},j={class:"form-group-title"},B={key:0,class:"txt-color mb-0 font-weight-bold"},E={key:1,class:"txt-color mb-0 font-weight-bold"},L={class:"form-group"},N=o("label",{for:"ma"},"Mã phiếu",-1),T={class:"form-group"},Y=o("label",{for:"ngay"},"Ngày",-1),z={class:"form-group"},F=o("label",{for:"nha_cung_cap_id"},"Nhà cung cấp",-1),P=o("option",{value:""},"Chọn nhà cung cấp",-1),q=["value"],A={class:"form-group"},H=o("label",{for:"du_an_id"},"Dự án",-1),G=o("option",{value:""},"Chọn dự án",-1),I=["value"],J={class:"form-group"},K=o("label",{for:"nhan_vien_id"},"Nhân viên",-1),Q=o("option",{value:""},"Chọn nhân viên",-1),R=["value"],W={class:"form-group"},X=o("label",{for:"loai_thu_chi_id"},"Loại thu chi",-1),Z=o("option",{value:""},"Chọn loại thu chi",-1),oo=["value"],no={class:"form-group"},io=o("label",{for:"ly_do"},"Lý do",-1),to={class:"form-group"},eo=o("label",{for:"so_tien"},"Số tiền",-1),ao={class:"form-group"},so=o("label",{for:"trang_thai"},"Trạng thái",-1),lo=o("option",{value:""},"Chọn trạng thái",-1),_o=o("option",{value:"0"},"Chưa thanh toán",-1),ho=o("option",{value:"1"},"Đã thanh toán",-1),ro=[lo,_o,ho],co={class:"modal-footer"},uo=["disabled"],vo={__name:"PhieuChiModal",props:{phieu_chi:Object,nha_cung_cap_list:Object,du_an_list:Object,nhan_vien_list:Object,loai_thu_chi_list:Object},setup(h){const d=h,n=b({id:"",ma:"",ngay:"",nha_cung_cap_id:"",du_an_id:"",nhan_vien_id:"",loai_thu_chi_id:"",ly_do:"",so_tien:0,trang_thai:"",loai:1});y(()=>{n.id=d.phieu_chi.id||"",n.ma=d.phieu_chi.ma||"",n.ngay=d.phieu_chi.ngay||U().format("YYYY-MM-DD"),n.nha_cung_cap_id=d.phieu_chi.nha_cung_cap_id||"",n.du_an_id=d.phieu_chi.du_an_id||"",n.nhan_vien_id=d.phieu_chi.nhan_vien_id||"",n.loai_thu_chi_id=d.phieu_chi.loai_thu_chi_id||"",n.ly_do=d.phieu_chi.ly_do||"",n.so_tien=d.phieu_chi.so_tien||0,n.trang_thai=d.phieu_chi.trang_thai});const f=()=>{d.phieu_chi.id||(n.ma="PC"+Date.now().toString().slice(-6)),n.post(route("phieuthuchi.store"),{onSuccess:()=>{$("#phieuthuchimodal").modal("hide"),k.visit(route("phieuthuchi.index",{loai:"phieuchi"}))},onError:()=>{console.log(n.errors)}})},v=()=>{$("#phieuthuchimodal").modal("hide"),n.reset(),n.clearErrors()};return C(()=>{$("#nha_cung_cap_id").select2({placeholder:"Chọn nhà cung cấp",width:"100%"}).on("change",function(){n.nha_cung_cap_id=$(this).val()}),$("#du_an_id").select2({placeholder:"Chọn dự án",width:"100%"}).on("change",function(){n.du_an_id=$(this).val()}),$("#nhan_vien_id").select2({placeholder:"Chọn nhân viên",width:"100%"}).on("change",function(){n.nhan_vien_id=$(this).val()})}),w(()=>{$("#nha_cung_cap_id").select2({placeholder:"Chọn nhà cung cấp",width:"100%"}).val(n.nha_cung_cap_id).trigger("change"),$("#du_an_id").select2({placeholder:"Chọn dự án",width:"100%"}).val(n.du_an_id).trigger("change"),$("#nhan_vien_id").select2({placeholder:"Chọn nhân viên",width:"100%"}).val(n.nhan_vien_id).trigger("change")}),(po,e)=>(a(),s("div",V,[o("div",x,[o("div",M,[o("div",O,[o("button",{type:"button",class:"close",onClick:m(v,["prevent"])},"×")]),o("form",{onSubmit:m(f,["prevent"])},[o("div",S,[l(o("input",{type:"hidden","onUpdate:modelValue":e[0]||(e[0]=i=>t(n).id=i),id:"id",class:"form-control"},null,512),[[r,t(n).id]]),o("div",D,[o("div",j,[h.phieu_chi.id?(a(),s("span",B,"Sửa phiếu chi")):(a(),s("span",E,"Thêm phiếu chi"))]),o("div",L,[N,o("div",null,[l(o("input",{readonly:"",class:_([{"border-danger":t(n).errors.ma},"form-control"]),type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>t(n).ma=i),id:"ma"},null,2),[[r,t(n).ma]])])]),o("div",T,[Y,o("div",null,[l(o("input",{class:_([{"border-danger":t(n).errors.ngay},"form-control"]),type:"date","onUpdate:modelValue":e[2]||(e[2]=i=>t(n).ngay=i),id:"ngay"},null,2),[[r,t(n).ngay]])])]),o("div",z,[F,o("div",null,[l(o("select",{class:_({"border-danger":t(n).errors.nha_cung_cap_id}),"onUpdate:modelValue":e[3]||(e[3]=i=>t(n).nha_cung_cap_id=i),id:"nha_cung_cap_id"},[P,(a(!0),s(u,null,p(h.nha_cung_cap_list,i=>(a(),s("option",{key:i.id,value:i.id},g(i.ten),9,q))),128))],2),[[c,t(n).nha_cung_cap_id]])])]),o("div",A,[H,o("div",null,[l(o("select",{class:_([{"border-danger":t(n).errors.du_an_id},"form-control"]),"onUpdate:modelValue":e[4]||(e[4]=i=>t(n).du_an_id=i),id:"du_an_id"},[G,(a(!0),s(u,null,p(h.du_an_list,i=>(a(),s("option",{key:i.id,value:i.id},g(i.ten),9,I))),128))],2),[[c,t(n).du_an_id]])])]),o("div",J,[K,o("div",null,[l(o("select",{class:_([{"border-danger":t(n).errors.nhan_vien_id},"form-control"]),"onUpdate:modelValue":e[5]||(e[5]=i=>t(n).nhan_vien_id=i),id:"nhan_vien_id"},[Q,(a(!0),s(u,null,p(h.nhan_vien_list,i=>(a(),s("option",{key:i.id,value:i.id},g(i.name),9,R))),128))],2),[[c,t(n).nhan_vien_id]])])]),o("div",W,[X,o("div",null,[l(o("select",{class:_([{"border-danger":t(n).errors.loai_thu_chi_id},"form-control"]),"onUpdate:modelValue":e[6]||(e[6]=i=>t(n).loai_thu_chi_id=i),id:"loai_thu_chi_id"},[Z,(a(!0),s(u,null,p(h.loai_thu_chi_list,i=>(a(),s("option",{key:i.id,value:i.id},g(i.ten),9,oo))),128))],2),[[c,t(n).loai_thu_chi_id]])])]),o("div",no,[io,o("div",null,[l(o("textarea",{class:_([{"border-danger":t(n).errors.ly_do},"form-control"]),type:"text","onUpdate:modelValue":e[7]||(e[7]=i=>t(n).ly_do=i),id:"ly_do"},`
                                    `,2),[[r,t(n).ly_do]])])]),o("div",to,[eo,o("div",null,[l(o("input",{class:_([{"border-danger":t(n).errors.so_tien},"form-control"]),type:"number","onUpdate:modelValue":e[8]||(e[8]=i=>t(n).so_tien=i),id:"so_tien"},null,2),[[r,t(n).so_tien]])])]),o("div",ao,[so,o("div",null,[l(o("select",{class:_([{"border-danger":t(n).errors.trang_thai},"form-control"]),"onUpdate:modelValue":e[9]||(e[9]=i=>t(n).trang_thai=i),id:"trang_thai"},ro,2),[[c,t(n).trang_thai]])])])])]),o("div",co,[o("button",{type:"submit",disabled:t(n).processing,class:"btn btn-primary"},"Lưu",8,uo),o("button",{type:"button",class:"btn btn-default",onClick:m(v,["prevent"])},"Hủy")])],32)])])]))}};export{vo as default};
