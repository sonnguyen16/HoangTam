import{T as b,z as y,q as k,A as C,o as a,c as s,a as o,e as m,w as l,f as r,u as i,n as h,B as u,F as c,k as p,t as g,O as w}from"./app-e4f1f62e.js";import{h as U}from"./moment-a9aaa855.js";const V={id:"phieuthuchimodal",class:"modal fade",role:"dialog"},x={class:"modal-dialog modal-lg",role:"document"},M={class:"modal-content"},O={class:"modal-header"},S={class:"modal-body"},D={class:"form-group-container"},T={class:"form-group-title"},j={key:0,class:"txt-color mb-0 font-weight-bold"},B={key:1,class:"txt-color mb-0 font-weight-bold"},E={class:"form-group"},L=o("label",{for:"ma"},"Mã phiếu",-1),Y={class:"form-group"},N=o("label",{for:"ngay"},"Ngày",-1),z={class:"form-group"},F=o("label",{for:"khach_hang_id"},"Khách hàng",-1),P=o("option",{value:""},"Chọn nhà cung cấp",-1),q=["value"],A={class:"form-group"},H=o("label",{for:"du_an_id"},"Dự án",-1),K=o("option",{value:""},"Chọn dự án",-1),G=["value"],I={class:"form-group"},J=o("label",{for:"nhan_vien_id"},"Nhân viên",-1),Q=o("option",{value:""},"Chọn nhân viên",-1),R=["value"],W={class:"form-group"},X=o("label",{for:"loai_thu_chi_id"},"Loại thu chi",-1),Z=o("option",{value:""},"Chọn loại thu chi",-1),oo=["value"],to={class:"form-group"},no=o("label",{for:"ly_do"},"Lý do",-1),io={class:"form-group"},eo=o("label",{for:"so_tien"},"Số tiền",-1),ao={class:"form-group"},so=o("label",{for:"trang_thai"},"Trạng thái",-1),lo=o("option",{value:"0"},"Chưa thanh toán",-1),ho=o("option",{value:"1"},"Đã thanh toán",-1),_o=[lo,ho],ro={class:"modal-footer"},uo=["disabled"],mo={__name:"PhieuThuModal",props:{phieu_thu:Object,khach_hang_list:Object,du_an_list:Object,nhan_vien_list:Object,loai_thu_chi_list:Object},setup(_){const d=_,t=b({id:"",ma:"",ngay:"",khach_hang_id:"",du_an_id:"",nhan_vien_id:"",loai_thu_chi_id:"",ly_do:"",so_tien:0,trang_thai:"",loai:0});y(()=>{t.id=d.phieu_thu.id||"",t.ma=d.phieu_thu.ma||"",t.ngay=d.phieu_thu.ngay||U().format("YYYY-MM-DD"),t.khach_hang_id=d.phieu_thu.khach_hang_id||"",t.du_an_id=d.phieu_thu.du_an_id||"",t.nhan_vien_id=d.phieu_thu.nhan_vien_id||"",t.loai_thu_chi_id=d.phieu_thu.loai_thu_chi_id||"",t.ly_do=d.phieu_thu.ly_do||"",t.so_tien=d.phieu_thu.so_tien||0,t.trang_thai=d.phieu_thu.trang_thai});const f=()=>{d.phieu_thu.id||(t.ma="PT"+Date.now().toString().slice(-6)),t.post(route("phieuthuchi.store"),{onSuccess:()=>{$("#phieuthuchimodal").modal("hide"),w.visit(route("phieuthuchi.index",{loai:"phieuthu"}))},onError:()=>{console.log(t.errors)}})},v=()=>{$("#phieuthuchimodal").modal("hide"),t.reset(),t.clearErrors()};return k(()=>{$("#khach_hang_id").select2({placeholder:"Chọn khách hàng",width:"100%"}).on("change",function(){t.khach_hang_id=$(this).val()}),$("#du_an_id").select2({placeholder:"Chọn dự án",width:"100%"}).on("change",function(){t.du_an_id=$(this).val()}),$("#nhan_vien_id").select2({placeholder:"Chọn nhân viên",width:"100%"}).on("change",function(){t.nhan_vien_id=$(this).val()})}),C(()=>{$("#khach_hang_id").select2({placeholder:"Chọn khách hàng",width:"100%"}).val(t.khach_hang_id).trigger("change"),$("#du_an_id").select2({placeholder:"Chọn dự án",width:"100%"}).val(t.du_an_id).trigger("change"),$("#nhan_vien_id").select2({placeholder:"Chọn nhân viên",width:"100%"}).val(t.nhan_vien_id).trigger("change")}),(co,e)=>(a(),s("div",V,[o("div",x,[o("div",M,[o("div",O,[o("button",{type:"button",class:"close",onClick:m(v,["prevent"])},"×")]),o("form",{onSubmit:m(f,["prevent"])},[o("div",S,[l(o("input",{type:"hidden","onUpdate:modelValue":e[0]||(e[0]=n=>i(t).id=n),id:"id",class:"form-control"},null,512),[[r,i(t).id]]),o("div",D,[o("div",T,[_.phieu_thu.id?(a(),s("span",j,"Sửa phiếu thu")):(a(),s("span",B,"Thêm phiếu thu"))]),o("div",E,[L,o("div",null,[l(o("input",{readonly:"",class:h([{"border-danger":i(t).errors.ma},"form-control"]),type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>i(t).ma=n),id:"ma"},null,2),[[r,i(t).ma]])])]),o("div",Y,[N,o("div",null,[l(o("input",{class:h([{"border-danger":i(t).errors.ngay},"form-control"]),type:"date","onUpdate:modelValue":e[2]||(e[2]=n=>i(t).ngay=n),id:"ngay"},null,2),[[r,i(t).ngay]])])]),o("div",z,[F,o("div",null,[l(o("select",{class:h({"border-danger":i(t).errors.khach_hang_id}),"onUpdate:modelValue":e[3]||(e[3]=n=>i(t).khach_hang_id=n),id:"khach_hang_id"},[P,(a(!0),s(c,null,p(_.khach_hang_list,n=>(a(),s("option",{key:n.id,value:n.id},g(n.ten),9,q))),128))],2),[[u,i(t).khach_hang_id]])])]),o("div",A,[H,o("div",null,[l(o("select",{class:h([{"border-danger":i(t).errors.du_an_id},"form-control"]),"onUpdate:modelValue":e[4]||(e[4]=n=>i(t).du_an_id=n),id:"du_an_id"},[K,(a(!0),s(c,null,p(_.du_an_list,n=>(a(),s("option",{key:n.id,value:n.id},g(n.ten),9,G))),128))],2),[[u,i(t).du_an_id]])])]),o("div",I,[J,o("div",null,[l(o("select",{class:h([{"border-danger":i(t).errors.nhan_vien_id},"form-control"]),"onUpdate:modelValue":e[5]||(e[5]=n=>i(t).nhan_vien_id=n),id:"nhan_vien_id"},[Q,(a(!0),s(c,null,p(_.nhan_vien_list,n=>(a(),s("option",{key:n.id,value:n.id},g(n.name),9,R))),128))],2),[[u,i(t).nhan_vien_id]])])]),o("div",W,[X,o("div",null,[l(o("select",{class:h([{"border-danger":i(t).errors.loai_thu_chi_id},"form-control"]),"onUpdate:modelValue":e[6]||(e[6]=n=>i(t).loai_thu_chi_id=n),id:"loai_thu_chi_id"},[Z,(a(!0),s(c,null,p(_.loai_thu_chi_list,n=>(a(),s("option",{key:n.id,value:n.id},g(n.ten),9,oo))),128))],2),[[u,i(t).loai_thu_chi_id]])])]),o("div",to,[no,o("div",null,[l(o("textarea",{class:h([{"border-danger":i(t).errors.ly_do},"form-control"]),type:"text","onUpdate:modelValue":e[7]||(e[7]=n=>i(t).ly_do=n),id:"ly_do"},`
                                    `,2),[[r,i(t).ly_do]])])]),o("div",io,[eo,o("div",null,[l(o("input",{class:h([{"border-danger":i(t).errors.so_tien},"form-control"]),type:"number","onUpdate:modelValue":e[8]||(e[8]=n=>i(t).so_tien=n),id:"so_tien"},null,2),[[r,i(t).so_tien]])])]),o("div",ao,[so,o("div",null,[l(o("select",{class:h([{"border-danger":i(t).errors.trang_thai},"form-control"]),"onUpdate:modelValue":e[9]||(e[9]=n=>i(t).trang_thai=n),id:"trang_thai"},_o,2),[[u,i(t).trang_thai]])])])])]),o("div",ro,[o("button",{type:"submit",disabled:i(t).processing,class:"btn btn-primary"},"Lưu",8,uo),o("button",{type:"button",class:"btn btn-default",onClick:m(v,["prevent"])},"Hủy")])],32)])])]))}};export{mo as default};
