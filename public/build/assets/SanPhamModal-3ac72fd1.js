import{T as w,h as D,z as O,q as E,o as l,c as i,a as n,e as h,w as d,f as r,u as t,n as m,B as g,F as v,k as b,t as u,O as j}from"./app-e4f1f62e.js";import{l as U}from"./lodash-4d481046.js";const B={id:"sanphammodal",class:"modal fade",role:"dialog"},q={class:"modal-dialog modal-lg",role:"document"},L={class:"modal-content"},z={class:"modal-header"},F={class:"modal-body"},G={class:"form-group-container"},H={class:"form-group-title"},K={key:0,class:"txt-color mb-0 font-weight-bold"},N={key:1,class:"txt-color mb-0 font-weight-bold"},P={class:"form-group"},A=n("label",{for:"name"},"Mã sản phẩm",-1),I={class:"form-group"},J=n("label",{for:"name"},"Tên sản phẩm",-1),Q={class:"form-group"},R=n("label",{for:"name"},"Mô tả",-1),W={class:"form-group"},X=n("label",{for:"name"},"Giá nhập",-1),Y={class:"form-group"},Z=n("label",{for:"name"},"Tồn đầu",-1),nn={class:"form-group"},on=n("label",{for:"name"},"Cảnh báo",-1),sn={class:"form-group"},tn=n("label",{for:"name"},"Giá bán",-1),an={class:"form-group"},en=n("label",null,"Đơn vị tính",-1),ln=n("option",{value:""},"Chọn đơn vị tính",-1),dn=["value"],_n={class:"form-group"},rn=n("label",null,"Loại sản phẩm",-1),mn=n("option",{value:""},"Chọn loại sản phẩm",-1),un=["value"],hn={class:"form-group-container mt-4"},pn=n("div",{class:"form-group-title"},[n("span",null,"Định mức")],-1),cn={class:"row mb-4"},vn={class:"col-5"},bn={class:"form-record"},gn=n("label",null,"Sản phẩm",-1),fn=["value"],yn={class:"col-5"},kn={class:"form-record"},Vn=n("label",{for:"name"},"Số lượng",-1),xn={class:"col-2"},Un={class:"table table-bordered table-responsive-md"},Mn=n("thead",null,[n("tr",null,[n("th",null,"Mã sản phẩm"),n("th",null,"Tên sản phẩm"),n("th",null,"Số lượng"),n("th",null,"Đơn vị tính"),n("th",null,"Thao tác")])],-1),Sn={key:0},Cn=n("td",{colspan:"6",class:"text-center"},"Không có dữ liệu",-1),Tn=[Cn],wn={class:"ma"},$n={class:"ten"},Dn={class:"quantity"},On={class:"quantity"},En={class:"action"},jn=["onClick"],Bn=n("i",{class:"fas fa-trash"},null,-1),qn=[Bn],Ln={class:"modal-footer"},zn=["disabled"],Kn={__name:"SanPhamModal",props:{san_pham:Object,don_vi_tinh_list:Object,san_pham_list:Object,loai_san_pham_list:Object},setup(p){const e=p,o=w({id:"",ma:"",ten:"",mo_ta:"",gia_ban:0,gia_nhap:0,ton_dau:0,canh_bao:0,don_vi_tinh_id:"",loai_san_pham_id:"",dinh_muc:[]});let _=D({id:"",san_pham_id:e.san_pham.id,san_pham:{},so_luong:0,ton_dau:0,don_vi_tinh:{}});O(()=>{o.id=e.san_pham.id,o.ma=e.san_pham.ma,o.ten=e.san_pham.ten,o.gia_ban=e.san_pham.gia_ban,o.gia_nhap=e.san_pham.gia_nhap,o.don_vi_tinh_id=e.san_pham.don_vi_tinh_id,o.loai_san_pham_id=e.san_pham.loai_san_pham_id,o.ton_dau=e.san_pham.ton_dau,o.mo_ta=e.san_pham.mo_ta,o.dinh_muc=e.san_pham.dinh_muc,o.canh_bao=e.san_pham.canh_bao});const M=()=>{o.post(route("sanpham.store"),{onSuccess:()=>{$("#sanphammodal").modal("hide"),j.visit(route("sanpham.index"))},onError:()=>{console.log(o.errors)}})},f=()=>{$("#sanphammodal").modal("hide"),o.reset(),o.clearErrors()};function S(c){o.dinh_muc=o.dinh_muc.filter((a,s)=>s!==c)}function C(){_.value.san_pham&&_.value.so_luong!==0&&(o.dinh_muc.push({id:"",san_pham_id:e.san_pham.id,san_pham:U.cloneDeep(_.value.san_pham),so_luong:_.value.so_luong,don_vi_tinh:U.cloneDeep(_.value.san_pham.don_vi_tinh)}),_.value={id:"",san_pham_id:e.san_pham.id,san_pham:{},so_luong:0,gia:0,don_vi_tinh:{}},$("#sanpham").val("").trigger("change"))}return E(()=>{$("#sanpham").select2().on("change",function(){_.value.san_pham=e.san_pham_list.data.find(c=>String(c.id)===$(this).val())})}),(c,a)=>(l(),i("div",B,[n("div",q,[n("div",L,[n("div",z,[n("button",{type:"button",class:"close",onClick:h(f,["prevent"])},"×")]),n("form",{onSubmit:h(M,["prevent"]),novalidate:""},[n("div",F,[d(n("input",{type:"hidden","onUpdate:modelValue":a[0]||(a[0]=s=>t(o).id=s),id:"id",class:"form-control"},null,512),[[r,t(o).id]]),n("div",G,[n("div",H,[t(o).id?(l(),i("span",K,"Sửa sản phẩm")):(l(),i("span",N,"Thêm sản phẩm"))]),n("div",P,[A,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.ma},"form-control"]),type:"text","onUpdate:modelValue":a[1]||(a[1]=s=>t(o).ma=s),id:"ten"},null,2),[[r,t(o).ma]])])]),n("div",I,[J,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.ten},"form-control"]),type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>t(o).ten=s),id:"ten"},null,2),[[r,t(o).ten]])])]),n("div",Q,[R,n("div",null,[d(n("textarea",{class:m([{"border-danger":t(o).errors.mo_ta},"form-control"]),type:"text","onUpdate:modelValue":a[3]||(a[3]=s=>t(o).mo_ta=s),id:"mo_ta"},null,2),[[r,t(o).mo_ta]])])]),n("div",W,[X,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.gia_nhap},"form-control"]),type:"number","onUpdate:modelValue":a[4]||(a[4]=s=>t(o).gia_nhap=s),id:"gia_nhap"},null,2),[[r,t(o).gia_nhap]])])]),n("div",Y,[Z,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.ton_dau},"form-control"]),type:"number","onUpdate:modelValue":a[5]||(a[5]=s=>t(o).ton_dau=s),id:"ton_dau"},null,2),[[r,t(o).ton_dau]])])]),n("div",nn,[on,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.canh_bao},"form-control"]),type:"number","onUpdate:modelValue":a[6]||(a[6]=s=>t(o).canh_bao=s),id:"ton_dau"},null,2),[[r,t(o).canh_bao]])])]),n("div",sn,[tn,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.gia_ban},"form-control"]),type:"number","onUpdate:modelValue":a[7]||(a[7]=s=>t(o).gia_ban=s),id:"gia_ban"},null,2),[[r,t(o).gia_ban]])])]),n("div",an,[en,n("div",null,[d(n("select",{class:m([{"border-danger":t(o).errors.don_vi_tinh_id},"form-control"]),"onUpdate:modelValue":a[8]||(a[8]=s=>t(o).don_vi_tinh_id=s),id:"don_vi_tinh_id"},[ln,(l(!0),i(v,null,b(p.don_vi_tinh_list,s=>(l(),i("option",{key:s.id,value:s.id},u(s.ten),9,dn))),128))],2),[[g,t(o).don_vi_tinh_id]])])]),n("div",_n,[rn,n("div",null,[d(n("select",{class:m([{"border-danger":t(o).errors.loai_san_pham_id},"form-control"]),"onUpdate:modelValue":a[9]||(a[9]=s=>t(o).loai_san_pham_id=s),id:"don_vi_tinh_id"},[mn,(l(!0),i(v,null,b(p.loai_san_pham_list,s=>(l(),i("option",{key:s.id,value:s.id},u(s.ten),9,un))),128))],2),[[g,t(o).loai_san_pham_id]])])])]),n("div",hn,[pn,n("div",cn,[n("div",vn,[n("div",bn,[gn,d(n("select",{class:"form-control","onUpdate:modelValue":a[10]||(a[10]=s=>t(_).san_pham=s),id:"sanpham"},[(l(!0),i(v,null,b(p.san_pham_list.data,s=>(l(),i("option",{value:s.id},u(s.ten),9,fn))),256))],512),[[g,t(_).san_pham]])])]),n("div",yn,[n("div",kn,[Vn,d(n("input",{type:"number","onUpdate:modelValue":a[11]||(a[11]=s=>t(_).so_luong=s),class:"form-control",id:"ghi_chu"},null,512),[[r,t(_).so_luong]])])]),n("div",xn,[n("button",{onClick:a[12]||(a[12]=h(s=>C(),["prevent"])),class:"btn btn-primary form-control"},"Thêm")])]),n("table",Un,[Mn,n("tbody",null,[t(o).dinh_muc.length===0?(l(),i("tr",Sn,Tn)):(l(!0),i(v,{key:1},b(t(o).dinh_muc,(s,T)=>{var y,k,V,x;return l(),i("tr",{key:s.id},[n("td",wn,u((y=s==null?void 0:s.san_pham)==null?void 0:y.ma),1),n("td",$n,u((k=s==null?void 0:s.san_pham)==null?void 0:k.ten),1),n("td",Dn,u(s==null?void 0:s.so_luong),1),n("td",On,u((x=(V=s==null?void 0:s.san_pham)==null?void 0:V.don_vi_tinh)==null?void 0:x.ten),1),n("td",En,[n("a",{class:"btn btn-danger btn-sm",onClick:h(Fn=>S(T),["prevent"])},qn,8,jn)])])}),128))])])])]),n("div",Ln,[n("button",{type:"submit",disabled:t(o).processing,class:"btn btn-primary"},"Lưu",8,zn),n("button",{type:"button",class:"btn btn-default",onClick:h(f,["prevent"])},"Hủy")])],32)])])]))}};export{Kn as default};
