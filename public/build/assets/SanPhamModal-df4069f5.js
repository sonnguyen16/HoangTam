import{T as w,h as D,z as E,q as j,o as l,c as i,a as n,e as h,w as d,f as r,u as t,n as m,B as f,F as v,k as b,t as u}from"./app-53c49383.js";import{l as x}from"./lodash-5f272ffb.js";const B={id:"sanphammodal",class:"modal fade",role:"dialog"},O={class:"modal-dialog modal-lg",role:"document"},q={class:"modal-content"},L={class:"modal-header"},z={class:"modal-body"},F={class:"form-group-container"},G={class:"form-group-title"},H={key:0,class:"txt-color mb-0 font-weight-bold"},K={key:1,class:"txt-color mb-0 font-weight-bold"},N={class:"form-group"},P=n("label",{for:"name"},"Mã sản phẩm",-1),A={class:"form-group"},I=n("label",{for:"name"},"Tên sản phẩm",-1),J={class:"form-group"},Q=n("label",{for:"name"},"Mô tả",-1),R={class:"form-group"},W=n("label",{for:"name"},"Giá nhập",-1),X={class:"form-group"},Y=n("label",{for:"name"},"Tồn đầu",-1),Z={class:"form-group"},nn=n("label",{for:"name"},"Cảnh báo",-1),on={class:"form-group"},sn=n("label",{for:"name"},"Giá bán",-1),tn={class:"form-group"},an=n("label",null,"Đơn vị tính",-1),en=n("option",{value:""},"Chọn đơn vị tính",-1),ln=["value"],dn={class:"form-group"},_n=n("label",null,"Loại sản phẩm",-1),rn=n("option",{value:""},"Chọn loại sản phẩm",-1),mn=["value"],un={class:"form-group-container mt-4"},hn=n("div",{class:"form-group-title"},[n("span",null,"Định mức")],-1),pn={class:"row mb-4"},cn={class:"col-5"},vn={class:"form-record"},bn=n("label",null,"Sản phẩm",-1),gn=["value"],fn={class:"col-5"},yn={class:"form-record"},kn=n("label",{for:"name"},"Số lượng",-1),Vn={class:"col-2"},Un={class:"table table-bordered table-responsive-md"},xn=n("thead",null,[n("tr",null,[n("th",null,"Mã sản phẩm"),n("th",null,"Tên sản phẩm"),n("th",null,"Số lượng"),n("th",null,"Đơn vị tính"),n("th",null,"Thao tác")])],-1),Mn={key:0},Sn=n("td",{colspan:"6",class:"text-center"},"Không có dữ liệu",-1),Cn=[Sn],Tn={class:"ma"},wn={class:"ten"},Dn={class:"quantity"},$n={class:"quantity"},En={class:"action"},jn=["onClick"],Bn=n("i",{class:"fas fa-trash"},null,-1),On=[Bn],qn={class:"modal-footer"},Ln=["disabled"],Hn={__name:"SanPhamModal",props:{san_pham:Object,don_vi_tinh_list:Object,san_pham_list:Object,loai_san_pham_list:Object},setup(p){const e=p,o=w({id:"",ma:"",ten:"",mo_ta:"",gia_ban:0,gia_nhap:0,ton_dau:0,canh_bao:0,don_vi_tinh_id:"",loai_san_pham_id:"",dinh_muc:[]});let _=D({id:"",san_pham_id:e.san_pham.id,san_pham:{},so_luong:0,ton_dau:0,don_vi_tinh:{}});E(()=>{o.id=e.san_pham.id,o.ma=e.san_pham.ma,o.ten=e.san_pham.ten,o.gia_ban=e.san_pham.gia_ban,o.gia_nhap=e.san_pham.gia_nhap,o.don_vi_tinh_id=e.san_pham.don_vi_tinh_id,o.loai_san_pham_id=e.san_pham.loai_san_pham_id,o.ton_dau=e.san_pham.ton_dau,o.mo_ta=e.san_pham.mo_ta,o.dinh_muc=e.san_pham.dinh_muc,o.canh_bao=e.san_pham.canh_bao});const M=()=>{o.post(route("sanpham.store"),{onSuccess:()=>{g()},onError:()=>{console.log(o.errors)}})},g=()=>{$("#sanphammodal").modal("hide"),o.reset(),o.clearErrors()};function S(c){o.dinh_muc=o.dinh_muc.filter((a,s)=>s!==c)}function C(){_.value.san_pham&&_.value.so_luong!==0&&(o.dinh_muc.push({id:"",san_pham_id:e.san_pham.id,san_pham:x.cloneDeep(_.value.san_pham),so_luong:_.value.so_luong,don_vi_tinh:x.cloneDeep(_.value.san_pham.don_vi_tinh)}),_.value={id:"",san_pham_id:e.san_pham.id,san_pham:{},so_luong:0,gia:0,don_vi_tinh:{}},$("#sanpham").val("").trigger("change"))}return j(()=>{$("#sanpham").select2().on("change",function(){_.value.san_pham=e.san_pham_list.data.find(c=>String(c.id)===$(this).val())})}),(c,a)=>(l(),i("div",B,[n("div",O,[n("div",q,[n("div",L,[n("button",{type:"button",class:"close",onClick:h(g,["prevent"])},"×")]),n("form",{onSubmit:h(M,["prevent"]),novalidate:""},[n("div",z,[d(n("input",{type:"hidden","onUpdate:modelValue":a[0]||(a[0]=s=>t(o).id=s),id:"id",class:"form-control"},null,512),[[r,t(o).id]]),n("div",F,[n("div",G,[t(o).id?(l(),i("span",H,"Sửa sản phẩm")):(l(),i("span",K,"Thêm sản phẩm"))]),n("div",N,[P,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.ma},"form-control"]),type:"text","onUpdate:modelValue":a[1]||(a[1]=s=>t(o).ma=s),id:"ten"},null,2),[[r,t(o).ma]])])]),n("div",A,[I,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.ten},"form-control"]),type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>t(o).ten=s),id:"ten"},null,2),[[r,t(o).ten]])])]),n("div",J,[Q,n("div",null,[d(n("textarea",{class:m([{"border-danger":t(o).errors.mo_ta},"form-control"]),type:"text","onUpdate:modelValue":a[3]||(a[3]=s=>t(o).mo_ta=s),id:"mo_ta"},null,2),[[r,t(o).mo_ta]])])]),n("div",R,[W,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.gia_nhap},"form-control"]),type:"number","onUpdate:modelValue":a[4]||(a[4]=s=>t(o).gia_nhap=s),id:"gia_nhap"},null,2),[[r,t(o).gia_nhap]])])]),n("div",X,[Y,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.ton_dau},"form-control"]),type:"number","onUpdate:modelValue":a[5]||(a[5]=s=>t(o).ton_dau=s),id:"ton_dau"},null,2),[[r,t(o).ton_dau]])])]),n("div",Z,[nn,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.canh_bao},"form-control"]),type:"number","onUpdate:modelValue":a[6]||(a[6]=s=>t(o).canh_bao=s),id:"ton_dau"},null,2),[[r,t(o).canh_bao]])])]),n("div",on,[sn,n("div",null,[d(n("input",{class:m([{"border-danger":t(o).errors.gia_ban},"form-control"]),type:"number","onUpdate:modelValue":a[7]||(a[7]=s=>t(o).gia_ban=s),id:"gia_ban"},null,2),[[r,t(o).gia_ban]])])]),n("div",tn,[an,n("div",null,[d(n("select",{class:m([{"border-danger":t(o).errors.don_vi_tinh_id},"form-control"]),"onUpdate:modelValue":a[8]||(a[8]=s=>t(o).don_vi_tinh_id=s),id:"don_vi_tinh_id"},[en,(l(!0),i(v,null,b(p.don_vi_tinh_list,s=>(l(),i("option",{key:s.id,value:s.id},u(s.ten),9,ln))),128))],2),[[f,t(o).don_vi_tinh_id]])])]),n("div",dn,[_n,n("div",null,[d(n("select",{class:m([{"border-danger":t(o).errors.loai_san_pham_id},"form-control"]),"onUpdate:modelValue":a[9]||(a[9]=s=>t(o).loai_san_pham_id=s),id:"don_vi_tinh_id"},[rn,(l(!0),i(v,null,b(p.loai_san_pham_list,s=>(l(),i("option",{key:s.id,value:s.id},u(s.ten),9,mn))),128))],2),[[f,t(o).loai_san_pham_id]])])])]),n("div",un,[hn,n("div",pn,[n("div",cn,[n("div",vn,[bn,d(n("select",{class:"form-control","onUpdate:modelValue":a[10]||(a[10]=s=>t(_).san_pham=s),id:"sanpham"},[(l(!0),i(v,null,b(p.san_pham_list.data,s=>(l(),i("option",{value:s.id},u(s.ten),9,gn))),256))],512),[[f,t(_).san_pham]])])]),n("div",fn,[n("div",yn,[kn,d(n("input",{type:"number","onUpdate:modelValue":a[11]||(a[11]=s=>t(_).so_luong=s),class:"form-control",id:"ghi_chu"},null,512),[[r,t(_).so_luong]])])]),n("div",Vn,[n("button",{onClick:a[12]||(a[12]=h(s=>C(),["prevent"])),class:"btn btn-primary form-control"},"Thêm")])]),n("table",Un,[xn,n("tbody",null,[t(o).dinh_muc.length===0?(l(),i("tr",Mn,Cn)):(l(!0),i(v,{key:1},b(t(o).dinh_muc,(s,T)=>{var y,k,V,U;return l(),i("tr",{key:s.id},[n("td",Tn,u((y=s==null?void 0:s.san_pham)==null?void 0:y.ma),1),n("td",wn,u((k=s==null?void 0:s.san_pham)==null?void 0:k.ten),1),n("td",Dn,u(s==null?void 0:s.so_luong),1),n("td",$n,u((U=(V=s==null?void 0:s.san_pham)==null?void 0:V.don_vi_tinh)==null?void 0:U.ten),1),n("td",En,[n("a",{class:"btn btn-danger btn-sm",onClick:h(zn=>S(T),["prevent"])},On,8,jn)])])}),128))])])])]),n("div",qn,[n("button",{type:"submit",disabled:t(o).processing,class:"btn btn-primary"},"Lưu",8,Ln),n("button",{type:"button",class:"btn btn-default",onClick:h(g,["prevent"])},"Hủy")])],32)])])]))}};export{Hn as default};
